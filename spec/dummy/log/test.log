  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "caffeinate_campaign_subscriptions"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "caffeinate_campaign_subscriptions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "caffeinate_campaign_id" integer NOT NULL, "subscriber_type" varchar NOT NULL, "subscriber_id" integer NOT NULL, "user_type" varchar, "user_id" integer, "token" varchar NOT NULL, "ended_at" datetime, "ended_reason" varchar, "resubscribed_at" datetime, "unsubscribed_at" datetime, "unsubscribe_reason" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_id", "subscriber_type", "user_id", "user_type", "ended_at", "resubscribed_at", "unsubscribed_at")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "caffeineate_campaign_subscriptions_on_campaign" ON "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_caffeinate_campaign_subscriptions_on_token" ON "caffeinate_campaign_subscriptions" ("token")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "caffeinate_campaigns"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "caffeinate_campaigns" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "slug" varchar NOT NULL, "active" boolean DEFAULT 1 NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_caffeinate_campaigns_on_slug" ON "caffeinate_campaigns" ("slug")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "caffeinate_mailings"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "caffeinate_mailings" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "caffeinate_campaign_subscription_id" integer NOT NULL, "send_at" datetime NOT NULL, "sent_at" datetime, "skipped_at" datetime, "mailer_class" varchar NOT NULL, "mailer_action" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_caffeinate_mailings" ON "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "skipped_at")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_caffeinate_mailings_on_campaign_subscription" ON "caffeinate_mailings" ("caffeinate_campaign_subscription_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies"[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "company_id" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_users_on_company_id" ON "users" ("company_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acaffeinate_campaign_subscriptions" ("id" integer NOT NULL PRIMARY KEY, "caffeinate_campaign_id" integer NOT NULL, "subscriber_type" varchar NOT NULL, "subscriber_id" integer NOT NULL, "user_type" varchar DEFAULT NULL, "user_id" integer DEFAULT NULL, "token" varchar NOT NULL, "ended_at" datetime DEFAULT NULL, "ended_reason" varchar DEFAULT NULL, "resubscribed_at" datetime DEFAULT NULL, "unsubscribed_at" datetime DEFAULT NULL, "unsubscribe_reason" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_acaffeinate_campaign_subscriptions_on_token" ON "acaffeinate_campaign_subscriptions" ("token")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tcaffeineate_campaign_subscriptions_on_campaign" ON "acaffeinate_campaign_subscriptions" ("caffeinate_campaign_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_caffeinate_campaign_subscriptions" ON "acaffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_id", "subscriber_type", "user_id", "user_type", "ended_at", "resubscribed_at", "unsubscribed_at")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "acaffeinate_campaign_subscriptions" ("id","caffeinate_campaign_id","subscriber_type","subscriber_id","user_type","user_id","token","ended_at","ended_reason","resubscribed_at","unsubscribed_at","unsubscribe_reason","created_at","updated_at")
                     SELECT "id","caffeinate_campaign_id","subscriber_type","subscriber_id","user_type","user_id","token","ended_at","ended_reason","resubscribed_at","unsubscribed_at","unsubscribe_reason","created_at","updated_at" FROM "caffeinate_campaign_subscriptions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "caffeinate_campaign_subscriptions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "caffeinate_campaign_subscriptions" ("id" integer NOT NULL PRIMARY KEY, "caffeinate_campaign_id" integer NOT NULL, "subscriber_type" varchar NOT NULL, "subscriber_id" integer NOT NULL, "user_type" varchar DEFAULT NULL, "user_id" integer DEFAULT NULL, "token" varchar NOT NULL, "ended_at" datetime DEFAULT NULL, "ended_reason" varchar DEFAULT NULL, "resubscribed_at" datetime DEFAULT NULL, "unsubscribed_at" datetime DEFAULT NULL, "unsubscribe_reason" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_47245f3215"
FOREIGN KEY ("caffeinate_campaign_id")
  REFERENCES "caffeinate_campaigns" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_id", "subscriber_type", "user_id", "user_type", "ended_at", "resubscribed_at", "unsubscribed_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "caffeineate_campaign_subscriptions_on_campaign" ON "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_caffeinate_campaign_subscriptions_on_token" ON "caffeinate_campaign_subscriptions" ("token")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("id","caffeinate_campaign_id","subscriber_type","subscriber_id","user_type","user_id","token","ended_at","ended_reason","resubscribed_at","unsubscribed_at","unsubscribe_reason","created_at","updated_at")
                     SELECT "id","caffeinate_campaign_id","subscriber_type","subscriber_id","user_type","user_id","token","ended_at","ended_reason","resubscribed_at","unsubscribed_at","unsubscribe_reason","created_at","updated_at" FROM "acaffeinate_campaign_subscriptions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "acaffeinate_campaign_subscriptions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acaffeinate_mailings" ("id" integer NOT NULL PRIMARY KEY, "caffeinate_campaign_subscription_id" integer NOT NULL, "send_at" datetime NOT NULL, "sent_at" datetime DEFAULT NULL, "skipped_at" datetime DEFAULT NULL, "mailer_class" varchar NOT NULL, "mailer_action" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_acaffeinate_mailings_on_campaign_subscription" ON "acaffeinate_mailings" ("caffeinate_campaign_subscription_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_caffeinate_mailings" ON "acaffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "skipped_at")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "acaffeinate_mailings" ("id","caffeinate_campaign_subscription_id","send_at","sent_at","skipped_at","mailer_class","mailer_action","created_at","updated_at")
                     SELECT "id","caffeinate_campaign_subscription_id","send_at","sent_at","skipped_at","mailer_class","mailer_action","created_at","updated_at" FROM "caffeinate_mailings"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "caffeinate_mailings"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "caffeinate_mailings" ("id" integer NOT NULL PRIMARY KEY, "caffeinate_campaign_subscription_id" integer NOT NULL, "send_at" datetime NOT NULL, "sent_at" datetime DEFAULT NULL, "skipped_at" datetime DEFAULT NULL, "mailer_class" varchar NOT NULL, "mailer_action" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c845df3bfc"
FOREIGN KEY ("caffeinate_campaign_subscription_id")
  REFERENCES "caffeinate_campaign_subscriptions" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_caffeinate_mailings" ON "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "skipped_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_caffeinate_mailings_on_campaign_subscription" ON "caffeinate_mailings" ("caffeinate_campaign_subscription_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("id","caffeinate_campaign_subscription_id","send_at","sent_at","skipped_at","mailer_class","mailer_action","created_at","updated_at")
                     SELECT "id","caffeinate_campaign_subscription_id","send_at","sent_at","skipped_at","mailer_class","mailer_action","created_at","updated_at" FROM "acaffeinate_mailings"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "acaffeinate_mailings"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20201124190157)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201124190151);

[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2022-10-29 17:35:59.580367"], ["updated_at", "2022-10-29 17:35:59.580367"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "5dfb436c81fa9c3e2444f802c9635f2e6c83415d"], ["created_at", "2022-10-29 17:35:59.582646"], ["updated_at", "2022-10-29 17:35:59.582646"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 3)
CaffeinateActionMailerExtensionMailer#hello: processed outbound mail in 82.0ms
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.4ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 1"], ["slug", "campaign_1"], ["created_at", "2022-10-29 17:35:59.763731"], ["updated_at", "2022-10-29 17:35:59.763731"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.767535"], ["updated_at", "2022-10-29 17:35:59.767535"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "bd29e777-1a41-44f6-9323-5156e6f8ad28"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "bd29e777-1a41-44f6-9323-5156e6f8ad28"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "bd29e777-1a41-44f6-9323-5156e6f8ad28"], ["created_at", "2022-10-29 17:35:59.781219"], ["updated_at", "2022-10-29 17:35:59.781219"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 2"], ["slug", "campaign_2"], ["created_at", "2022-10-29 17:35:59.784231"], ["updated_at", "2022-10-29 17:35:59.784231"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.784855"], ["updated_at", "2022-10-29 17:35:59.784855"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5b32218f-575d-4405-a28d-108a45f0da93"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5b32218f-575d-4405-a28d-108a45f0da93"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "5b32218f-575d-4405-a28d-108a45f0da93"], ["created_at", "2022-10-29 17:35:59.786136"], ["updated_at", "2022-10-29 17:35:59.786136"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 3"], ["slug", "campaign_3"], ["created_at", "2022-10-29 17:35:59.787527"], ["updated_at", "2022-10-29 17:35:59.787527"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.788021"], ["updated_at", "2022-10-29 17:35:59.788021"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8d020280-7401-48da-aecb-165ba8a3e454"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8d020280-7401-48da-aecb-165ba8a3e454"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "8d020280-7401-48da-aecb-165ba8a3e454"], ["created_at", "2022-10-29 17:35:59.789173"], ["updated_at", "2022-10-29 17:35:59.789173"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 4"], ["slug", "campaign_4"], ["created_at", "2022-10-29 17:35:59.790675"], ["updated_at", "2022-10-29 17:35:59.790675"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.791225"], ["updated_at", "2022-10-29 17:35:59.791225"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "120c0a6e-3747-4ae9-ab0a-796a48de4186"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "120c0a6e-3747-4ae9-ab0a-796a48de4186"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "120c0a6e-3747-4ae9-ab0a-796a48de4186"], ["created_at", "2022-10-29 17:35:59.792409"], ["updated_at", "2022-10-29 17:35:59.792409"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 5"], ["slug", "campaign_5"], ["created_at", "2022-10-29 17:35:59.795763"], ["updated_at", "2022-10-29 17:35:59.795763"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.796535"], ["updated_at", "2022-10-29 17:35:59.796535"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "1@example.com"], ["created_at", "2022-10-29 17:35:59.798771"], ["updated_at", "2022-10-29 17:35:59.798771"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3ab43482-49bb-4ba7-bf93-11fd7e2eaac4"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3ab43482-49bb-4ba7-bf93-11fd7e2eaac4"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "3ab43482-49bb-4ba7-bf93-11fd7e2eaac4"], ["created_at", "2022-10-29 17:35:59.799523"], ["updated_at", "2022-10-29 17:35:59.799523"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.801850"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:35:59.801926"], ["updated_at", "2022-10-29 17:35:59.801926"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 6"], ["slug", "campaign_6"], ["created_at", "2022-10-29 17:35:59.808025"], ["updated_at", "2022-10-29 17:35:59.808025"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.811529"], ["updated_at", "2022-10-29 17:35:59.811529"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "2@example.com"], ["created_at", "2022-10-29 17:35:59.812116"], ["updated_at", "2022-10-29 17:35:59.812116"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "40c1c074-7f3b-4f67-8187-54b049d88132"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "40c1c074-7f3b-4f67-8187-54b049d88132"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "40c1c074-7f3b-4f67-8187-54b049d88132"], ["created_at", "2022-10-29 17:35:59.812891"], ["updated_at", "2022-10-29 17:35:59.812891"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.813201"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:35:59.813252"], ["updated_at", "2022-10-29 17:35:59.813252"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 7"], ["slug", "campaign_7"], ["created_at", "2022-10-29 17:35:59.815088"], ["updated_at", "2022-10-29 17:35:59.815088"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.815879"], ["updated_at", "2022-10-29 17:35:59.815879"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "3@example.com"], ["created_at", "2022-10-29 17:35:59.816266"], ["updated_at", "2022-10-29 17:35:59.816266"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9a15a12f-0795-4395-ad06-416c13a75463"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9a15a12f-0795-4395-ad06-416c13a75463"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "9a15a12f-0795-4395-ad06-416c13a75463"], ["created_at", "2022-10-29 17:35:59.817249"], ["updated_at", "2022-10-29 17:35:59.817249"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.817733"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:35:59.817860"], ["updated_at", "2022-10-29 17:35:59.817860"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 8"], ["slug", "campaign_8"], ["created_at", "2022-10-29 17:35:59.821151"], ["updated_at", "2022-10-29 17:35:59.821151"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.822112"], ["updated_at", "2022-10-29 17:35:59.822112"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "4@example.com"], ["created_at", "2022-10-29 17:35:59.822686"], ["updated_at", "2022-10-29 17:35:59.822686"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2ef7a1bf-b613-4298-bb8e-4345350c9d37"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2ef7a1bf-b613-4298-bb8e-4345350c9d37"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "2ef7a1bf-b613-4298-bb8e-4345350c9d37"], ["created_at", "2022-10-29 17:35:59.823545"], ["updated_at", "2022-10-29 17:35:59.823545"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.823913"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:35:59.823963"], ["updated_at", "2022-10-29 17:35:59.823963"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:35:59.824935"], ["updated_at", "2022-10-29 17:35:59.825020"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 9"], ["slug", "campaign_9"], ["created_at", "2022-10-29 17:35:59.826183"], ["updated_at", "2022-10-29 17:35:59.826183"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.826934"], ["updated_at", "2022-10-29 17:35:59.826934"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "5@example.com"], ["created_at", "2022-10-29 17:35:59.827307"], ["updated_at", "2022-10-29 17:35:59.827307"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a8d1df38-59be-4cd5-9c9d-78ac45d044ec"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a8d1df38-59be-4cd5-9c9d-78ac45d044ec"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "a8d1df38-59be-4cd5-9c9d-78ac45d044ec"], ["created_at", "2022-10-29 17:35:59.827957"], ["updated_at", "2022-10-29 17:35:59.827957"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.828257"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:35:59.828309"], ["updated_at", "2022-10-29 17:35:59.828309"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:35:59.829240"], ["updated_at", "2022-10-29 17:35:59.829316"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 10"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:35:59.832100"], ["updated_at", "2022-10-29 17:35:59.832100"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.832730"], ["updated_at", "2022-10-29 17:35:59.832730"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "6@example.com"], ["created_at", "2022-10-29 17:35:59.833415"], ["updated_at", "2022-10-29 17:35:59.833415"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "1626fec3-d040-4040-9d22-b3628c315bcf"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "1626fec3-d040-4040-9d22-b3628c315bcf"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "1626fec3-d040-4040-9d22-b3628c315bcf"], ["created_at", "2022-10-29 17:35:59.834364"], ["updated_at", "2022-10-29 17:35:59.834364"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."subscriber_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ?[0m  [["subscriber_id", 1], ["subscriber_type", "Company"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
Creating scope :not_subscribed_to_campaign. Overwriting existing method Company.not_subscribed_to_campaign.
Creating scope :unsubscribed_from_campaign. Overwriting existing method Company.unsubscribed_from_campaign.
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 11"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:35:59.837925"], ["updated_at", "2022-10-29 17:35:59.837925"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.838737"], ["updated_at", "2022-10-29 17:35:59.838737"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "7@example.com"], ["created_at", "2022-10-29 17:35:59.839207"], ["updated_at", "2022-10-29 17:35:59.839207"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2ff5482f-e962-4130-9b06-b6173018cc7b"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2ff5482f-e962-4130-9b06-b6173018cc7b"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "2ff5482f-e962-4130-9b06-b6173018cc7b"], ["created_at", "2022-10-29 17:35:59.840168"], ["updated_at", "2022-10-29 17:35:59.840168"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."subscriber_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? ORDER BY "caffeinate_campaign_subscriptions"."id" ASC LIMIT ?[0m  [["subscriber_id", 1], ["subscriber_type", "Company"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
Creating scope :not_subscribed_to_campaign. Overwriting existing method Company.not_subscribed_to_campaign.
Creating scope :unsubscribed_from_campaign. Overwriting existing method Company.unsubscribed_from_campaign.
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 12"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:35:59.843765"], ["updated_at", "2022-10-29 17:35:59.843765"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.844406"], ["updated_at", "2022-10-29 17:35:59.844406"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "8@example.com"], ["created_at", "2022-10-29 17:35:59.844795"], ["updated_at", "2022-10-29 17:35:59.844795"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5f266ceb-d1ea-4e76-a271-2786afd192b1"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5f266ceb-d1ea-4e76-a271-2786afd192b1"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "5f266ceb-d1ea-4e76-a271-2786afd192b1"], ["created_at", "2022-10-29 17:35:59.845477"], ["updated_at", "2022-10-29 17:35:59.845477"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."subscriber_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ?[0m  [["subscriber_id", 1], ["subscriber_type", "Company"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
Creating scope :not_subscribed_to_campaign. Overwriting existing method Company.not_subscribed_to_campaign.
Creating scope :unsubscribed_from_campaign. Overwriting existing method Company.unsubscribed_from_campaign.
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 13"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:35:59.849633"], ["updated_at", "2022-10-29 17:35:59.849633"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.850341"], ["updated_at", "2022-10-29 17:35:59.850341"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "9@example.com"], ["created_at", "2022-10-29 17:35:59.850740"], ["updated_at", "2022-10-29 17:35:59.850740"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "74177c93-1f94-4ffc-9363-9f07b3a66600"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "74177c93-1f94-4ffc-9363-9f07b3a66600"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "74177c93-1f94-4ffc-9363-9f07b3a66600"], ["created_at", "2022-10-29 17:35:59.851524"], ["updated_at", "2022-10-29 17:35:59.851524"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Campaign Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."subscriber_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? ORDER BY "caffeinate_campaigns"."id" ASC LIMIT ?[0m  [["subscriber_id", 1], ["subscriber_type", "Company"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
Creating scope :not_subscribed_to_campaign. Overwriting existing method Company.not_subscribed_to_campaign.
Creating scope :unsubscribed_from_campaign. Overwriting existing method Company.unsubscribed_from_campaign.
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 14"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:35:59.854570"], ["updated_at", "2022-10-29 17:35:59.854570"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.855146"], ["updated_at", "2022-10-29 17:35:59.855146"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "10@example.com"], ["created_at", "2022-10-29 17:35:59.855504"], ["updated_at", "2022-10-29 17:35:59.855504"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c9fb718c-0f9a-4c37-b06b-95cd8b35e749"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c9fb718c-0f9a-4c37-b06b-95cd8b35e749"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "c9fb718c-0f9a-4c37-b06b-95cd8b35e749"], ["created_at", "2022-10-29 17:35:59.856165"], ["updated_at", "2022-10-29 17:35:59.856165"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_mailings"."caffeinate_campaign_subscription_id" = "caffeinate_campaign_subscriptions"."id" WHERE "caffeinate_campaign_subscriptions"."subscriber_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ?[0m  [["subscriber_id", 1], ["subscriber_type", "Company"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
Creating scope :not_subscribed_to_campaign. Overwriting existing method Company.not_subscribed_to_campaign.
Creating scope :unsubscribed_from_campaign. Overwriting existing method Company.unsubscribed_from_campaign.
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 15"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:35:59.859882"], ["updated_at", "2022-10-29 17:35:59.859882"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.860723"], ["updated_at", "2022-10-29 17:35:59.860723"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "11@example.com"], ["created_at", "2022-10-29 17:35:59.861152"], ["updated_at", "2022-10-29 17:35:59.861152"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a26678bc-8de1-4f6a-bfa0-46936a7b673b"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a26678bc-8de1-4f6a-bfa0-46936a7b673b"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "a26678bc-8de1-4f6a-bfa0-46936a7b673b"], ["created_at", "2022-10-29 17:35:59.861947"], ["updated_at", "2022-10-29 17:35:59.861947"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."user_id" = ? AND "caffeinate_campaign_subscriptions"."user_type" = ?[0m  [["user_id", 1], ["user_type", "User"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
Creating scope :not_subscribed_to_campaign. Overwriting existing method Company.not_subscribed_to_campaign.
Creating scope :unsubscribed_from_campaign. Overwriting existing method Company.unsubscribed_from_campaign.
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 16"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:35:59.864960"], ["updated_at", "2022-10-29 17:35:59.864960"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.865639"], ["updated_at", "2022-10-29 17:35:59.865639"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "12@example.com"], ["created_at", "2022-10-29 17:35:59.866027"], ["updated_at", "2022-10-29 17:35:59.866027"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5b674300-aecf-42bc-8e4e-ea5ed84575f4"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5b674300-aecf-42bc-8e4e-ea5ed84575f4"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "5b674300-aecf-42bc-8e4e-ea5ed84575f4"], ["created_at", "2022-10-29 17:35:59.866758"], ["updated_at", "2022-10-29 17:35:59.866758"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."user_id" = ? AND "caffeinate_campaign_subscriptions"."user_type" = ? ORDER BY "caffeinate_campaign_subscriptions"."id" ASC LIMIT ?[0m  [["user_id", 1], ["user_type", "User"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
Creating scope :not_subscribed_to_campaign. Overwriting existing method Company.not_subscribed_to_campaign.
Creating scope :unsubscribed_from_campaign. Overwriting existing method Company.unsubscribed_from_campaign.
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
Creating scope :not_subscribed_to_campaign. Overwriting existing method Company.not_subscribed_to_campaign.
Creating scope :unsubscribed_from_campaign. Overwriting existing method Company.unsubscribed_from_campaign.
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 17"], ["slug", "campaign_10"], ["created_at", "2022-10-29 17:35:59.875485"], ["updated_at", "2022-10-29 17:35:59.875485"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.876210"], ["updated_at", "2022-10-29 17:35:59.876210"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "13@example.com"], ["created_at", "2022-10-29 17:35:59.876647"], ["updated_at", "2022-10-29 17:35:59.876647"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5a25f01a-8ec6-4eff-9120-b9523c287992"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5a25f01a-8ec6-4eff-9120-b9523c287992"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "5a25f01a-8ec6-4eff-9120-b9523c287992"], ["created_at", "2022-10-29 17:35:59.877684"], ["updated_at", "2022-10-29 17:35:59.877684"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.878185"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:35:59.878263"], ["updated_at", "2022-10-29 17:35:59.878263"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:35:59.879450') ORDER BY send_at asc, "caffeinate_mailings"."send_at" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
ArgumentMailer#hello: processed outbound mail in 0.4ms
Delivered mail 635d647fd7e8d_ee14f64836a0@eds-MacBook-Pro.mail (4.1ms)
Date: Sat, 29 Oct 2022 12:35:59 -0500
From: argument_mailer@example.com
To: argument_mailer@example.com
Message-ID: <635d647fd7e8d_ee14f64836a0@eds-MacBook-Pro.mail>
Subject: Argument Mailer
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/5a25f01a-8ec6-4eff-9120-b9523c287992/subscribe>

ArgumentMailer
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:35:59.885863"], ["updated_at", "2022-10-29 17:35:59.886052"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 18"], ["slug", "campaign_11"], ["created_at", "2022-10-29 17:35:59.887889"], ["updated_at", "2022-10-29 17:35:59.887889"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 19"], ["slug", "campaign_12"], ["created_at", "2022-10-29 17:35:59.889118"], ["updated_at", "2022-10-29 17:35:59.889118"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 20"], ["slug", "campaign_13"], ["created_at", "2022-10-29 17:35:59.890305"], ["updated_at", "2022-10-29 17:35:59.890305"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 21"], ["slug", "campaign_14"], ["created_at", "2022-10-29 17:35:59.891415"], ["updated_at", "2022-10-29 17:35:59.891415"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 22"], ["slug", "campaign_15"], ["created_at", "2022-10-29 17:35:59.892302"], ["updated_at", "2022-10-29 17:35:59.892302"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 23"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:35:59.893171"], ["updated_at", "2022-10-29 17:35:59.893171"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 24"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:35:59.893627"], ["updated_at", "2022-10-29 17:35:59.893627"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.895925"], ["updated_at", "2022-10-29 17:35:59.895925"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "14@example.com"], ["created_at", "2022-10-29 17:35:59.896416"], ["updated_at", "2022-10-29 17:35:59.896416"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "1b85809f-3053-4380-89ff-50b98225e797"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "1b85809f-3053-4380-89ff-50b98225e797"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "1b85809f-3053-4380-89ff-50b98225e797"], ["created_at", "2022-10-29 17:35:59.897143"], ["updated_at", "2022-10-29 17:35:59.897143"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.897454"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:35:59.897506"], ["updated_at", "2022-10-29 17:35:59.897506"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.897749"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_skip"], ["created_at", "2022-10-29 17:35:59.897786"], ["updated_at", "2022-10-29 17:35:59.897786"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.897987"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:35:59.898023"], ["updated_at", "2022-10-29 17:35:59.898023"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_end"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:35:59.899641"], ["updated_at", "2022-10-29 17:35:59.900238"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 25"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:35:59.901813"], ["updated_at", "2022-10-29 17:35:59.901813"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 26"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:35:59.902312"], ["updated_at", "2022-10-29 17:35:59.902312"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.902717"], ["updated_at", "2022-10-29 17:35:59.902717"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "15@example.com"], ["created_at", "2022-10-29 17:35:59.903052"], ["updated_at", "2022-10-29 17:35:59.903052"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "033789a0-a07d-4ff7-84af-d8bc39ff36c8"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "033789a0-a07d-4ff7-84af-d8bc39ff36c8"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "033789a0-a07d-4ff7-84af-d8bc39ff36c8"], ["created_at", "2022-10-29 17:35:59.903695"], ["updated_at", "2022-10-29 17:35:59.903695"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.903972"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:35:59.904031"], ["updated_at", "2022-10-29 17:35:59.904031"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.904265"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_skip"], ["created_at", "2022-10-29 17:35:59.904301"], ["updated_at", "2022-10-29 17:35:59.904301"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.904504"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:35:59.904539"], ["updated_at", "2022-10-29 17:35:59.904539"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_end"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:35:59.905525"], ["updated_at", "2022-10-29 17:35:59.905928"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:35:59.906426"], ["updated_at", "2022-10-29 17:35:59.906519"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 27"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:35:59.907487"], ["updated_at", "2022-10-29 17:35:59.907487"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 28"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:35:59.907927"], ["updated_at", "2022-10-29 17:35:59.907927"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.908489"], ["updated_at", "2022-10-29 17:35:59.908489"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "16@example.com"], ["created_at", "2022-10-29 17:35:59.909094"], ["updated_at", "2022-10-29 17:35:59.909094"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "4129b44d-3c4d-43fc-9f40-bacc369cbab1"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "4129b44d-3c4d-43fc-9f40-bacc369cbab1"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 2], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "4129b44d-3c4d-43fc-9f40-bacc369cbab1"], ["created_at", "2022-10-29 17:35:59.909931"], ["updated_at", "2022-10-29 17:35:59.909931"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.910283"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:35:59.910339"], ["updated_at", "2022-10-29 17:35:59.910339"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.910614"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:35:59.910650"], ["updated_at", "2022-10-29 17:35:59.910650"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_end"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "ended_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:35:59.911959"], ["ended_reason", "I ended"], ["updated_at", "2022-10-29 17:35:59.912492"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 29"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:35:59.913839"], ["updated_at", "2022-10-29 17:35:59.913839"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 30"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:35:59.914473"], ["updated_at", "2022-10-29 17:35:59.914473"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.915005"], ["updated_at", "2022-10-29 17:35:59.915005"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "17@example.com"], ["created_at", "2022-10-29 17:35:59.915423"], ["updated_at", "2022-10-29 17:35:59.915423"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "4fced598-091c-4401-ac49-19ed22f1b013"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "4fced598-091c-4401-ac49-19ed22f1b013"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 2], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "4fced598-091c-4401-ac49-19ed22f1b013"], ["created_at", "2022-10-29 17:35:59.916230"], ["updated_at", "2022-10-29 17:35:59.916230"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.916552"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:35:59.916615"], ["updated_at", "2022-10-29 17:35:59.916615"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.916873"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:35:59.916910"], ["updated_at", "2022-10-29 17:35:59.916910"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_end"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "ended_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:35:59.918108"], ["ended_reason", "I ended"], ["updated_at", "2022-10-29 17:35:59.918549"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 31"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:35:59.919758"], ["updated_at", "2022-10-29 17:35:59.919758"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 32"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:35:59.920366"], ["updated_at", "2022-10-29 17:35:59.920366"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.920862"], ["updated_at", "2022-10-29 17:35:59.920862"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "18@example.com"], ["created_at", "2022-10-29 17:35:59.921339"], ["updated_at", "2022-10-29 17:35:59.921339"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "101b56e8-c7a6-4183-8d3f-53c08c5f6605"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "101b56e8-c7a6-4183-8d3f-53c08c5f6605"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 2], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "101b56e8-c7a6-4183-8d3f-53c08c5f6605"], ["created_at", "2022-10-29 17:35:59.922148"], ["updated_at", "2022-10-29 17:35:59.922148"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.922543"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:35:59.922600"], ["updated_at", "2022-10-29 17:35:59.922600"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.922871"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:35:59.922909"], ["updated_at", "2022-10-29 17:35:59.922909"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_end"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "ended_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:35:59.924117"], ["ended_reason", "I ended"], ["updated_at", "2022-10-29 17:35:59.924593"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:35:59.925268"], ["updated_at", "2022-10-29 17:35:59.925369"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 33"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:35:59.926390"], ["updated_at", "2022-10-29 17:35:59.926390"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 34"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:35:59.926870"], ["updated_at", "2022-10-29 17:35:59.926870"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:35:59.927281"], ["updated_at", "2022-10-29 17:35:59.927281"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "19@example.com"], ["created_at", "2022-10-29 17:35:59.927641"], ["updated_at", "2022-10-29 17:35:59.927641"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "29885fde-86bb-421b-8e9e-ab29fc1244a2"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "29885fde-86bb-421b-8e9e-ab29fc1244a2"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "29885fde-86bb-421b-8e9e-ab29fc1244a2"], ["created_at", "2022-10-29 17:35:59.928349"], ["updated_at", "2022-10-29 17:35:59.928349"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.928636"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:35:59.928685"], ["updated_at", "2022-10-29 17:35:59.928685"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.928924"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_skip"], ["created_at", "2022-10-29 17:35:59.928960"], ["updated_at", "2022-10-29 17:35:59.928960"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:59.929170"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:35:59.929206"], ["updated_at", "2022-10-29 17:35:59.929206"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_unsubscribe"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.1ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:35:59.930837"], ["updated_at", "2022-10-29 17:35:59.948518"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.3ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 35"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:35:59.985896"], ["updated_at", "2022-10-29 17:35:59.985896"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 36"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:35:59.987156"], ["updated_at", "2022-10-29 17:35:59.987156"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.004978"], ["updated_at", "2022-10-29 17:36:00.004978"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "20@example.com"], ["created_at", "2022-10-29 17:36:00.005516"], ["updated_at", "2022-10-29 17:36:00.005516"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9a874c5e-70db-4f00-a468-a7afd652a814"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9a874c5e-70db-4f00-a468-a7afd652a814"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "9a874c5e-70db-4f00-a468-a7afd652a814"], ["created_at", "2022-10-29 17:36:00.006566"], ["updated_at", "2022-10-29 17:36:00.006566"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.007026"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:36:00.007118"], ["updated_at", "2022-10-29 17:36:00.007118"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.007588"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_skip"], ["created_at", "2022-10-29 17:36:00.007646"], ["updated_at", "2022-10-29 17:36:00.007646"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.007932"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:36:00.007979"], ["updated_at", "2022-10-29 17:36:00.007979"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_unsubscribe"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.026348"], ["updated_at", "2022-10-29 17:36:00.044547"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 37"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:36:00.046883"], ["updated_at", "2022-10-29 17:36:00.046883"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 38"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:36:00.047631"], ["updated_at", "2022-10-29 17:36:00.047631"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.048236"], ["updated_at", "2022-10-29 17:36:00.048236"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "21@example.com"], ["created_at", "2022-10-29 17:36:00.048769"], ["updated_at", "2022-10-29 17:36:00.048769"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "ec0a888b-acb4-451a-a7d8-c25111ad009c"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "ec0a888b-acb4-451a-a7d8-c25111ad009c"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 2], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "ec0a888b-acb4-451a-a7d8-c25111ad009c"], ["created_at", "2022-10-29 17:36:00.049895"], ["updated_at", "2022-10-29 17:36:00.049895"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.050345"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:36:00.050420"], ["updated_at", "2022-10-29 17:36:00.050420"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.050775"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:36:00.050825"], ["updated_at", "2022-10-29 17:36:00.050825"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_unsubscribe"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.1ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "unsubscribe_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.052379"], ["unsubscribe_reason", "I unsubscribed"], ["updated_at", "2022-10-29 17:36:00.052980"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 39"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:36:00.054751"], ["updated_at", "2022-10-29 17:36:00.054751"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 40"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:36:00.055349"], ["updated_at", "2022-10-29 17:36:00.055349"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.055847"], ["updated_at", "2022-10-29 17:36:00.055847"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "22@example.com"], ["created_at", "2022-10-29 17:36:00.056269"], ["updated_at", "2022-10-29 17:36:00.056269"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3045d446-1dad-4f09-9dca-87c81146212d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3045d446-1dad-4f09-9dca-87c81146212d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 2], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "3045d446-1dad-4f09-9dca-87c81146212d"], ["created_at", "2022-10-29 17:36:00.057102"], ["updated_at", "2022-10-29 17:36:00.057102"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.057486"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:36:00.057624"], ["updated_at", "2022-10-29 17:36:00.057624"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.058232"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:36:00.058298"], ["updated_at", "2022-10-29 17:36:00.058298"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_unsubscribe"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "unsubscribe_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.060035"], ["unsubscribe_reason", "I unsubscribed"], ["updated_at", "2022-10-29 17:36:00.060690"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 41"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:36:00.062410"], ["updated_at", "2022-10-29 17:36:00.062410"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 42"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:36:00.062958"], ["updated_at", "2022-10-29 17:36:00.062958"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.063401"], ["updated_at", "2022-10-29 17:36:00.063401"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "23@example.com"], ["created_at", "2022-10-29 17:36:00.063798"], ["updated_at", "2022-10-29 17:36:00.063798"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c5cdc64f-2f8a-4d09-bca8-8782b1f536ba"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c5cdc64f-2f8a-4d09-bca8-8782b1f536ba"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 2], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "c5cdc64f-2f8a-4d09-bca8-8782b1f536ba"], ["created_at", "2022-10-29 17:36:00.064580"], ["updated_at", "2022-10-29 17:36:00.064580"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.064932"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:36:00.065007"], ["updated_at", "2022-10-29 17:36:00.065007"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.065309"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:36:00.065353"], ["updated_at", "2022-10-29 17:36:00.065353"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_unsubscribe"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "unsubscribe_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.066627"], ["unsubscribe_reason", "I unsubscribed"], ["updated_at", "2022-10-29 17:36:00.067136"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.067765"], ["updated_at", "2022-10-29 17:36:00.067879"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 43"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:36:00.069180"], ["updated_at", "2022-10-29 17:36:00.069180"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 44"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:36:00.069762"], ["updated_at", "2022-10-29 17:36:00.069762"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.070220"], ["updated_at", "2022-10-29 17:36:00.070220"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "24@example.com"], ["created_at", "2022-10-29 17:36:00.070638"], ["updated_at", "2022-10-29 17:36:00.070638"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "62da3596-30c1-40b6-9913-af60348ee750"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "62da3596-30c1-40b6-9913-af60348ee750"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "62da3596-30c1-40b6-9913-af60348ee750"], ["created_at", "2022-10-29 17:36:00.071418"], ["updated_at", "2022-10-29 17:36:00.071418"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.071767"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:36:00.071828"], ["updated_at", "2022-10-29 17:36:00.071828"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.072342"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_skip"], ["created_at", "2022-10-29 17:36:00.072443"], ["updated_at", "2022-10-29 17:36:00.072443"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.072864"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:36:00.072920"], ["updated_at", "2022-10-29 17:36:00.072920"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_skip"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "skipped_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["skipped_at", "2022-10-29 17:36:00.074382"], ["updated_at", "2022-10-29 17:36:00.074722"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 45"], ["slug", "drip_evaluator"], ["created_at", "2022-10-29 17:36:00.075862"], ["updated_at", "2022-10-29 17:36:00.075862"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 46"], ["slug", "drip_reason_evaluator"], ["created_at", "2022-10-29 17:36:00.076408"], ["updated_at", "2022-10-29 17:36:00.076408"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.076880"], ["updated_at", "2022-10-29 17:36:00.076880"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "25@example.com"], ["created_at", "2022-10-29 17:36:00.077303"], ["updated_at", "2022-10-29 17:36:00.077303"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "cdc0cfd3-c9cd-404a-8e88-3b50785010a6"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "cdc0cfd3-c9cd-404a-8e88-3b50785010a6"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "cdc0cfd3-c9cd-404a-8e88-3b50785010a6"], ["created_at", "2022-10-29 17:36:00.078098"], ["updated_at", "2022-10-29 17:36:00.078098"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.078445"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_end"], ["created_at", "2022-10-29 17:36:00.078500"], ["updated_at", "2022-10-29 17:36:00.078500"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.078786"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_skip"], ["created_at", "2022-10-29 17:36:00.078827"], ["updated_at", "2022-10-29 17:36:00.078827"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.079068"], ["mailer_class", "DripEvaluatorMailer"], ["mailer_action", "hello_unsubscribe"], ["created_at", "2022-10-29 17:36:00.079108"], ["updated_at", "2022-10-29 17:36:00.079108"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."mailer_action" = ? LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["mailer_action", "hello_skip"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "skipped_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["skipped_at", "2022-10-29 17:36:00.080136"], ["updated_at", "2022-10-29 17:36:00.080404"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 47"], ["slug", "delivery_test_dripper"], ["created_at", "2022-10-29 17:36:00.083718"], ["updated_at", "2022-10-29 17:36:00.083718"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 48"], ["slug", "delivery_test_dripper"], ["created_at", "2022-10-29 17:36:00.085030"], ["updated_at", "2022-10-29 17:36:00.085030"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 49"], ["slug", "delivery_test_dripper"], ["created_at", "2022-10-29 17:36:00.085905"], ["updated_at", "2022-10-29 17:36:00.085905"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.086550"], ["updated_at", "2022-10-29 17:36:00.086550"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "26@example.com"], ["created_at", "2022-10-29 17:36:00.087021"], ["updated_at", "2022-10-29 17:36:00.087021"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "dfd88c80-8a12-441c-9526-5fc31852d104"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "dfd88c80-8a12-441c-9526-5fc31852d104"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "dfd88c80-8a12-441c-9526-5fc31852d104"], ["created_at", "2022-10-29 17:36:00.089624"], ["updated_at", "2022-10-29 17:36:00.089624"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.090114"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.090219"], ["updated_at", "2022-10-29 17:36:00.090219"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.090539"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "with_params"], ["created_at", "2022-10-29 17:36:00.090583"], ["updated_at", "2022-10-29 17:36:00.090583"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.090814"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye"], ["created_at", "2022-10-29 17:36:00.090852"], ["updated_at", "2022-10-29 17:36:00.090852"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.091065"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_end"], ["created_at", "2022-10-29 17:36:00.091103"], ["updated_at", "2022-10-29 17:36:00.091103"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.091392"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_unsubscribe"], ["created_at", "2022-10-29 17:36:00.091432"], ["updated_at", "2022-10-29 17:36:00.091432"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.092324"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.092382"], ["updated_at", "2022-10-29 17:36:00.092382"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.092677"], ["updated_at", "2022-10-29 17:36:00.092810"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 50"], ["slug", "delivery_test_dripper"], ["created_at", "2022-10-29 17:36:00.094040"], ["updated_at", "2022-10-29 17:36:00.094040"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.094634"], ["updated_at", "2022-10-29 17:36:00.094634"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "27@example.com"], ["created_at", "2022-10-29 17:36:00.094997"], ["updated_at", "2022-10-29 17:36:00.094997"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "ea3b1b95-c402-4bc6-8afa-7d502b852439"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "ea3b1b95-c402-4bc6-8afa-7d502b852439"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "ea3b1b95-c402-4bc6-8afa-7d502b852439"], ["created_at", "2022-10-29 17:36:00.095667"], ["updated_at", "2022-10-29 17:36:00.095667"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.095973"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.096023"], ["updated_at", "2022-10-29 17:36:00.096023"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.096272"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "with_params"], ["created_at", "2022-10-29 17:36:00.096309"], ["updated_at", "2022-10-29 17:36:00.096309"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.096540"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye"], ["created_at", "2022-10-29 17:36:00.096578"], ["updated_at", "2022-10-29 17:36:00.096578"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.096790"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_end"], ["created_at", "2022-10-29 17:36:00.096827"], ["updated_at", "2022-10-29 17:36:00.096827"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.097150"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_unsubscribe"], ["created_at", "2022-10-29 17:36:00.097206"], ["updated_at", "2022-10-29 17:36:00.097206"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.097900"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.097963"], ["updated_at", "2022-10-29 17:36:00.097963"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "skipped_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["skipped_at", "2022-10-29 17:36:00.098240"], ["updated_at", "2022-10-29 17:36:00.098312"], ["id", 6]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 51"], ["slug", "funky_dripper"], ["created_at", "2022-10-29 17:36:00.099749"], ["updated_at", "2022-10-29 17:36:00.099749"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 52"], ["slug", "funky_dripper"], ["created_at", "2022-10-29 17:36:00.100584"], ["updated_at", "2022-10-29 17:36:00.100584"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 53"], ["slug", "funky_dripper"], ["created_at", "2022-10-29 17:36:00.101299"], ["updated_at", "2022-10-29 17:36:00.101299"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 54"], ["slug", "funky_dripper"], ["created_at", "2022-10-29 17:36:00.102146"], ["updated_at", "2022-10-29 17:36:00.102146"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 55"], ["slug", "funky_dripper"], ["created_at", "2022-10-29 17:36:00.102843"], ["updated_at", "2022-10-29 17:36:00.102843"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 56"], ["slug", "campaign_16"], ["created_at", "2022-10-29 17:36:00.104165"], ["updated_at", "2022-10-29 17:36:00.104165"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.104658"], ["updated_at", "2022-10-29 17:36:00.104658"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "52e898ab-5af1-488f-8516-f0a5654e6575"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "52e898ab-5af1-488f-8516-f0a5654e6575"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "52e898ab-5af1-488f-8516-f0a5654e6575"], ["created_at", "2022-10-29 17:36:00.105851"], ["updated_at", "2022-10-29 17:36:00.105851"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.106142"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.106193"], ["updated_at", "2022-10-29 17:36:00.106193"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "campaign_16"], ["LIMIT", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.107223') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["LIMIT", 1000]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.107223') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_mailings"."id" = ? ORDER BY send_at asc[0m  [["caffeinate_campaign_id", 1], ["id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
ArgumentMailer#hello: processed outbound mail in 0.3ms
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.110444"], ["updated_at", "2022-10-29 17:36:00.110941"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
Skipped delivery of mail 635d64801b4b1_ee14f648379d@eds-MacBook-Pro.mail as `perform_deliveries` is false
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: argument_mailer@example.com
To: argument_mailer@example.com
Message-ID: <635d64801b4b1_ee14f648379d@eds-MacBook-Pro.mail>
Subject: Argument Mailer
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/52e898ab-5af1-488f-8516-f0a5654e6575/subscribe>

ArgumentMailer
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.112093"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 57"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.113610"], ["updated_at", "2022-10-29 17:36:00.113610"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 58"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.114327"], ["updated_at", "2022-10-29 17:36:00.114327"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.114764"], ["updated_at", "2022-10-29 17:36:00.114764"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "b02d12fa-831e-4076-a54f-022379cdde54"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "b02d12fa-831e-4076-a54f-022379cdde54"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "b02d12fa-831e-4076-a54f-022379cdde54"], ["created_at", "2022-10-29 17:36:00.116277"], ["updated_at", "2022-10-29 17:36:00.116277"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 2], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8dc16592-fc1d-4a85-a8ea-22264cb4a4a5"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8dc16592-fc1d-4a85-a8ea-22264cb4a4a5"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 2], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "8dc16592-fc1d-4a85-a8ea-22264cb4a4a5"], ["created_at", "2022-10-29 17:36:00.117695"], ["updated_at", "2022-10-29 17:36:00.117695"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 59"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.118899"], ["updated_at", "2022-10-29 17:36:00.118899"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 60"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.119392"], ["updated_at", "2022-10-29 17:36:00.119392"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 61"], ["slug", "campaign_17"], ["created_at", "2022-10-29 17:36:00.119796"], ["updated_at", "2022-10-29 17:36:00.119796"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "campaign_17"], ["LIMIT", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.120487') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["LIMIT", 1000]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 62"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.121964"], ["updated_at", "2022-10-29 17:36:00.121964"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 63"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.122466"], ["updated_at", "2022-10-29 17:36:00.122466"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 64"], ["slug", "campaign_18"], ["created_at", "2022-10-29 17:36:00.122898"], ["updated_at", "2022-10-29 17:36:00.122898"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "campaign_18"], ["LIMIT", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.123475') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["LIMIT", 1000]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 65"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.125278"], ["updated_at", "2022-10-29 17:36:00.125278"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 66"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.125789"], ["updated_at", "2022-10-29 17:36:00.125789"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 67"], ["slug", "campaign_19"], ["created_at", "2022-10-29 17:36:00.126167"], ["updated_at", "2022-10-29 17:36:00.126167"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "campaign_19"], ["LIMIT", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.126676') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["LIMIT", 1000]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 68"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.127863"], ["updated_at", "2022-10-29 17:36:00.127863"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 69"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.128327"], ["updated_at", "2022-10-29 17:36:00.128327"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 70"], ["slug", "campaign_20"], ["created_at", "2022-10-29 17:36:00.128749"], ["updated_at", "2022-10-29 17:36:00.128749"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.129128"], ["updated_at", "2022-10-29 17:36:00.129128"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "1a511b61-1da0-411b-bbaf-66f79bb54420"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "1a511b61-1da0-411b-bbaf-66f79bb54420"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "1a511b61-1da0-411b-bbaf-66f79bb54420"], ["created_at", "2022-10-29 17:36:00.130277"], ["updated_at", "2022-10-29 17:36:00.130277"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.130717"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.130810"], ["updated_at", "2022-10-29 17:36:00.130810"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "campaign_20"], ["LIMIT", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.131928') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["LIMIT", 1000]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.131928') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_mailings"."id" = ? ORDER BY send_at asc[0m  [["caffeinate_campaign_id", 3], ["id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
ArgumentMailer#hello: processed outbound mail in 0.3ms
Delivered mail 635d648020cdb_ee14f648385f@eds-MacBook-Pro.mail (0.6ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: argument_mailer@example.com
To: argument_mailer@example.com
Message-ID: <635d648020cdb_ee14f648385f@eds-MacBook-Pro.mail>
Subject: Argument Mailer
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/1a511b61-1da0-411b-bbaf-66f79bb54420/subscribe>

ArgumentMailer
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.134752"], ["updated_at", "2022-10-29 17:36:00.134884"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.135321"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 71"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.136782"], ["updated_at", "2022-10-29 17:36:00.136782"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 72"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.137477"], ["updated_at", "2022-10-29 17:36:00.137477"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 73"], ["slug", "campaign_21"], ["created_at", "2022-10-29 17:36:00.137885"], ["updated_at", "2022-10-29 17:36:00.137885"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.138227"], ["updated_at", "2022-10-29 17:36:00.138227"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "63259d57-7267-4160-be93-625745a802eb"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "63259d57-7267-4160-be93-625745a802eb"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "63259d57-7267-4160-be93-625745a802eb"], ["created_at", "2022-10-29 17:36:00.139313"], ["updated_at", "2022-10-29 17:36:00.139313"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.139617"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.139673"], ["updated_at", "2022-10-29 17:36:00.139673"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "campaign_21"], ["LIMIT", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.140539') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["LIMIT", 1000]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.140539') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_mailings"."id" = ? ORDER BY send_at asc[0m  [["caffeinate_campaign_id", 3], ["id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
ArgumentMailer#hello: processed outbound mail in 0.3ms
Delivered mail 635d648022ea5_ee14f648393d@eds-MacBook-Pro.mail (0.5ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: argument_mailer@example.com
To: argument_mailer@example.com
Message-ID: <635d648022ea5_ee14f648393d@eds-MacBook-Pro.mail>
Subject: Argument Mailer
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/63259d57-7267-4160-be93-625745a802eb/subscribe>

ArgumentMailer
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.143388"], ["updated_at", "2022-10-29 17:36:00.143582"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.144077"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 74"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.145628"], ["updated_at", "2022-10-29 17:36:00.145628"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 75"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.146206"], ["updated_at", "2022-10-29 17:36:00.146206"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 76"], ["slug", "campaign_22"], ["created_at", "2022-10-29 17:36:00.146605"], ["updated_at", "2022-10-29 17:36:00.146605"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.146991"], ["updated_at", "2022-10-29 17:36:00.146991"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c90e6a5c-e909-40e8-a4f6-6a2e3c3ef5ec"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c90e6a5c-e909-40e8-a4f6-6a2e3c3ef5ec"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "c90e6a5c-e909-40e8-a4f6-6a2e3c3ef5ec"], ["created_at", "2022-10-29 17:36:00.148478"], ["updated_at", "2022-10-29 17:36:00.148478"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.148856"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.148921"], ["updated_at", "2022-10-29 17:36:00.148921"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "campaign_22"], ["LIMIT", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.149824') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["LIMIT", 1000]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.149824') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_mailings"."id" = ? ORDER BY send_at asc[0m  [["caffeinate_campaign_id", 3], ["id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
ArgumentMailer#hello: processed outbound mail in 0.3ms
Delivered mail 635d6480251c7_ee14f6484018@eds-MacBook-Pro.mail (0.6ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: argument_mailer@example.com
To: argument_mailer@example.com
Message-ID: <635d6480251c7_ee14f6484018@eds-MacBook-Pro.mail>
Subject: Argument Mailer
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/c90e6a5c-e909-40e8-a4f6-6a2e3c3ef5ec/subscribe>

ArgumentMailer
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.152397"], ["updated_at", "2022-10-29 17:36:00.152495"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.152876"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 77"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.154312"], ["updated_at", "2022-10-29 17:36:00.154312"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 78"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.154872"], ["updated_at", "2022-10-29 17:36:00.154872"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 79"], ["slug", "campaign_23"], ["created_at", "2022-10-29 17:36:00.155288"], ["updated_at", "2022-10-29 17:36:00.155288"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.155693"], ["updated_at", "2022-10-29 17:36:00.155693"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c698e6ec-1009-42a3-bbc6-435ed1b3bd7a"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c698e6ec-1009-42a3-bbc6-435ed1b3bd7a"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "c698e6ec-1009-42a3-bbc6-435ed1b3bd7a"], ["created_at", "2022-10-29 17:36:00.157170"], ["updated_at", "2022-10-29 17:36:00.157170"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.157480"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.157540"], ["updated_at", "2022-10-29 17:36:00.157540"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "campaign_23"], ["LIMIT", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.158332') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["LIMIT", 1000]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.158332') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_mailings"."id" = ? ORDER BY send_at asc[0m  [["caffeinate_campaign_id", 3], ["id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
ArgumentMailer#hello: processed outbound mail in 0.3ms
Delivered mail 635d648027280_ee14f648416e@eds-MacBook-Pro.mail (0.5ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: argument_mailer@example.com
To: argument_mailer@example.com
Message-ID: <635d648027280_ee14f648416e@eds-MacBook-Pro.mail>
Subject: Argument Mailer
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/c698e6ec-1009-42a3-bbc6-435ed1b3bd7a/subscribe>

ArgumentMailer
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.160770"], ["updated_at", "2022-10-29 17:36:00.160882"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.161296"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 80"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.162596"], ["updated_at", "2022-10-29 17:36:00.162596"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 81"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.163156"], ["updated_at", "2022-10-29 17:36:00.163156"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 82"], ["slug", "campaign_24"], ["created_at", "2022-10-29 17:36:00.163586"], ["updated_at", "2022-10-29 17:36:00.163586"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 83"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.164368"], ["updated_at", "2022-10-29 17:36:00.164368"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 84"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.164829"], ["updated_at", "2022-10-29 17:36:00.164829"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 85"], ["slug", "campaign_25"], ["created_at", "2022-10-29 17:36:00.165218"], ["updated_at", "2022-10-29 17:36:00.165218"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 86"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.167700"], ["updated_at", "2022-10-29 17:36:00.167700"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 87"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.168294"], ["updated_at", "2022-10-29 17:36:00.168294"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 88"], ["slug", "campaign_26"], ["created_at", "2022-10-29 17:36:00.168740"], ["updated_at", "2022-10-29 17:36:00.168740"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 89"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.169609"], ["updated_at", "2022-10-29 17:36:00.169609"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 90"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.170116"], ["updated_at", "2022-10-29 17:36:00.170116"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 91"], ["slug", "campaign_27"], ["created_at", "2022-10-29 17:36:00.170502"], ["updated_at", "2022-10-29 17:36:00.170502"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.170946"], ["updated_at", "2022-10-29 17:36:00.170946"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "be531ff4-3be0-472d-a71d-e66d39b1108d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "be531ff4-3be0-472d-a71d-e66d39b1108d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "be531ff4-3be0-472d-a71d-e66d39b1108d"], ["created_at", "2022-10-29 17:36:00.172375"], ["updated_at", "2022-10-29 17:36:00.172375"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.172771"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.172841"], ["updated_at", "2022-10-29 17:36:00.172841"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "resubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["resubscribed_at", "2022-10-29 17:36:00.173645"], ["updated_at", "2022-10-29 17:36:00.173796"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 92"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.175343"], ["updated_at", "2022-10-29 17:36:00.175343"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 93"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.175930"], ["updated_at", "2022-10-29 17:36:00.175930"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 94"], ["slug", "campaign_28"], ["created_at", "2022-10-29 17:36:00.176292"], ["updated_at", "2022-10-29 17:36:00.176292"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 95"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.177510"], ["updated_at", "2022-10-29 17:36:00.177510"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 96"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.178128"], ["updated_at", "2022-10-29 17:36:00.178128"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 97"], ["slug", "campaign_29"], ["created_at", "2022-10-29 17:36:00.178549"], ["updated_at", "2022-10-29 17:36:00.178549"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.179021"], ["updated_at", "2022-10-29 17:36:00.179021"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "25397767-5c1e-4645-b446-0a6c807a2e0d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "25397767-5c1e-4645-b446-0a6c807a2e0d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "25397767-5c1e-4645-b446-0a6c807a2e0d"], ["created_at", "2022-10-29 17:36:00.180393"], ["updated_at", "2022-10-29 17:36:00.180393"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.180702"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.180765"], ["updated_at", "2022-10-29 17:36:00.180765"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 98"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.182784"], ["updated_at", "2022-10-29 17:36:00.182784"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 99"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.183277"], ["updated_at", "2022-10-29 17:36:00.183277"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 100"], ["slug", "campaign_30"], ["created_at", "2022-10-29 17:36:00.183634"], ["updated_at", "2022-10-29 17:36:00.183634"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.184050"], ["updated_at", "2022-10-29 17:36:00.184050"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "56c6a27c-ed33-423f-a853-9290a2cfe1fc"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "56c6a27c-ed33-423f-a853-9290a2cfe1fc"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "56c6a27c-ed33-423f-a853-9290a2cfe1fc"], ["created_at", "2022-10-29 17:36:00.185193"], ["updated_at", "2022-10-29 17:36:00.185193"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.185494"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.185543"], ["updated_at", "2022-10-29 17:36:00.185543"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 101"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.187390"], ["updated_at", "2022-10-29 17:36:00.187390"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 102"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.187931"], ["updated_at", "2022-10-29 17:36:00.187931"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 103"], ["slug", "campaign_31"], ["created_at", "2022-10-29 17:36:00.188315"], ["updated_at", "2022-10-29 17:36:00.188315"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.188726"], ["updated_at", "2022-10-29 17:36:00.188726"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "823f5355-50b9-4c81-b99c-5b21f7464a2d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "823f5355-50b9-4c81-b99c-5b21f7464a2d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "823f5355-50b9-4c81-b99c-5b21f7464a2d"], ["created_at", "2022-10-29 17:36:00.190094"], ["updated_at", "2022-10-29 17:36:00.190094"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.190466"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.190523"], ["updated_at", "2022-10-29 17:36:00.190523"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 104"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.192493"], ["updated_at", "2022-10-29 17:36:00.192493"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 105"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.192966"], ["updated_at", "2022-10-29 17:36:00.192966"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 106"], ["slug", "campaign_32"], ["created_at", "2022-10-29 17:36:00.193343"], ["updated_at", "2022-10-29 17:36:00.193343"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.193736"], ["updated_at", "2022-10-29 17:36:00.193736"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8b26cf5c-a102-403a-92cd-bd2d0f0060b6"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8b26cf5c-a102-403a-92cd-bd2d0f0060b6"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "8b26cf5c-a102-403a-92cd-bd2d0f0060b6"], ["created_at", "2022-10-29 17:36:00.194933"], ["updated_at", "2022-10-29 17:36:00.194933"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.195222"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.195270"], ["updated_at", "2022-10-29 17:36:00.195270"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 107"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.197739"], ["updated_at", "2022-10-29 17:36:00.197739"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 108"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.198409"], ["updated_at", "2022-10-29 17:36:00.198409"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 109"], ["slug", "campaign_33"], ["created_at", "2022-10-29 17:36:00.198818"], ["updated_at", "2022-10-29 17:36:00.198818"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 110"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.199888"], ["updated_at", "2022-10-29 17:36:00.199888"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 111"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.200366"], ["updated_at", "2022-10-29 17:36:00.200366"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 112"], ["slug", "campaign_34"], ["created_at", "2022-10-29 17:36:00.200774"], ["updated_at", "2022-10-29 17:36:00.200774"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.201219"], ["updated_at", "2022-10-29 17:36:00.201219"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "e86c4176-bba3-4d12-82f9-5c444149b2e1"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "e86c4176-bba3-4d12-82f9-5c444149b2e1"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "e86c4176-bba3-4d12-82f9-5c444149b2e1"], ["created_at", "2022-10-29 17:36:00.202569"], ["updated_at", "2022-10-29 17:36:00.202569"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.202920"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.202973"], ["updated_at", "2022-10-29 17:36:00.202973"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.204195"], ["updated_at", "2022-10-29 17:36:00.204307"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 113"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.205565"], ["updated_at", "2022-10-29 17:36:00.205565"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 114"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.206123"], ["updated_at", "2022-10-29 17:36:00.206123"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 115"], ["slug", "campaign_35"], ["created_at", "2022-10-29 17:36:00.206555"], ["updated_at", "2022-10-29 17:36:00.206555"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.207054"], ["updated_at", "2022-10-29 17:36:00.207054"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "1a5297b5-c659-4290-94a9-733c47247438"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "1a5297b5-c659-4290-94a9-733c47247438"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "1a5297b5-c659-4290-94a9-733c47247438"], ["created_at", "2022-10-29 17:36:00.208446"], ["updated_at", "2022-10-29 17:36:00.208446"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.208781"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.208849"], ["updated_at", "2022-10-29 17:36:00.208849"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.209973"], ["updated_at", "2022-10-29 17:36:00.210056"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 116"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.211241"], ["updated_at", "2022-10-29 17:36:00.211241"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 117"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.211746"], ["updated_at", "2022-10-29 17:36:00.211746"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 118"], ["slug", "campaign_36"], ["created_at", "2022-10-29 17:36:00.212120"], ["updated_at", "2022-10-29 17:36:00.212120"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.212508"], ["updated_at", "2022-10-29 17:36:00.212508"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "eeafe2e9-b6d2-4f64-877e-24b91d1018e3"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "eeafe2e9-b6d2-4f64-877e-24b91d1018e3"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "eeafe2e9-b6d2-4f64-877e-24b91d1018e3"], ["created_at", "2022-10-29 17:36:00.213643"], ["updated_at", "2022-10-29 17:36:00.213643"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.213923"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.213974"], ["updated_at", "2022-10-29 17:36:00.213974"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.214946"], ["updated_at", "2022-10-29 17:36:00.215028"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 119"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.215977"], ["updated_at", "2022-10-29 17:36:00.215977"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 120"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.216434"], ["updated_at", "2022-10-29 17:36:00.216434"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 121"], ["slug", "campaign_37"], ["created_at", "2022-10-29 17:36:00.216797"], ["updated_at", "2022-10-29 17:36:00.216797"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.217197"], ["updated_at", "2022-10-29 17:36:00.217197"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3df172d5-348b-4c8b-997a-79cdc84ac20f"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3df172d5-348b-4c8b-997a-79cdc84ac20f"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "3df172d5-348b-4c8b-997a-79cdc84ac20f"], ["created_at", "2022-10-29 17:36:00.218338"], ["updated_at", "2022-10-29 17:36:00.218338"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.218644"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.218694"], ["updated_at", "2022-10-29 17:36:00.218694"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.219692"], ["updated_at", "2022-10-29 17:36:00.219778"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 122"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.221489"], ["updated_at", "2022-10-29 17:36:00.221489"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 123"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.222024"], ["updated_at", "2022-10-29 17:36:00.222024"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 124"], ["slug", "campaign_38"], ["created_at", "2022-10-29 17:36:00.222455"], ["updated_at", "2022-10-29 17:36:00.222455"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.222914"], ["updated_at", "2022-10-29 17:36:00.222914"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "02c5b4b6-a948-46fe-b864-fef04d984a76"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "02c5b4b6-a948-46fe-b864-fef04d984a76"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "02c5b4b6-a948-46fe-b864-fef04d984a76"], ["created_at", "2022-10-29 17:36:00.224309"], ["updated_at", "2022-10-29 17:36:00.224309"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.224949"], ["updated_at", "2022-10-29 17:36:00.225080"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 125"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.226291"], ["updated_at", "2022-10-29 17:36:00.226291"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 126"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.226778"], ["updated_at", "2022-10-29 17:36:00.226778"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 127"], ["slug", "campaign_39"], ["created_at", "2022-10-29 17:36:00.227189"], ["updated_at", "2022-10-29 17:36:00.227189"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 128"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.227950"], ["updated_at", "2022-10-29 17:36:00.227950"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 129"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.228388"], ["updated_at", "2022-10-29 17:36:00.228388"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 130"], ["slug", "campaign_40"], ["created_at", "2022-10-29 17:36:00.228739"], ["updated_at", "2022-10-29 17:36:00.228739"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.229109"], ["updated_at", "2022-10-29 17:36:00.229109"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c9613fbb-c784-40e7-ba26-d75532cc0fb5"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c9613fbb-c784-40e7-ba26-d75532cc0fb5"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "c9613fbb-c784-40e7-ba26-d75532cc0fb5"], ["created_at", "2022-10-29 17:36:00.230235"], ["updated_at", "2022-10-29 17:36:00.230235"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.230799"], ["updated_at", "2022-10-29 17:36:00.230898"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 131"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.231937"], ["updated_at", "2022-10-29 17:36:00.231937"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 132"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.232397"], ["updated_at", "2022-10-29 17:36:00.232397"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 133"], ["slug", "campaign_41"], ["created_at", "2022-10-29 17:36:00.232768"], ["updated_at", "2022-10-29 17:36:00.232768"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 134"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.233501"], ["updated_at", "2022-10-29 17:36:00.233501"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 135"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.233955"], ["updated_at", "2022-10-29 17:36:00.233955"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 136"], ["slug", "campaign_42"], ["created_at", "2022-10-29 17:36:00.234346"], ["updated_at", "2022-10-29 17:36:00.234346"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.234732"], ["updated_at", "2022-10-29 17:36:00.234732"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "cf64a349-b44f-4363-8451-b3442cdf3660"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "cf64a349-b44f-4363-8451-b3442cdf3660"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "cf64a349-b44f-4363-8451-b3442cdf3660"], ["created_at", "2022-10-29 17:36:00.235979"], ["updated_at", "2022-10-29 17:36:00.235979"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.236658"], ["updated_at", "2022-10-29 17:36:00.236782"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 137"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.239847"], ["updated_at", "2022-10-29 17:36:00.239847"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 138"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.240464"], ["updated_at", "2022-10-29 17:36:00.240464"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 139"], ["slug", "campaign_43"], ["created_at", "2022-10-29 17:36:00.240848"], ["updated_at", "2022-10-29 17:36:00.240848"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.241263"], ["updated_at", "2022-10-29 17:36:00.241263"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "f4ea8932-d035-4195-8581-5a0d5cfce15d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "f4ea8932-d035-4195-8581-5a0d5cfce15d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "f4ea8932-d035-4195-8581-5a0d5cfce15d"], ["created_at", "2022-10-29 17:36:00.242543"], ["updated_at", "2022-10-29 17:36:00.242543"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.243122"], ["updated_at", "2022-10-29 17:36:00.243235"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 140"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.244246"], ["updated_at", "2022-10-29 17:36:00.244246"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 141"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.244695"], ["updated_at", "2022-10-29 17:36:00.244695"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 142"], ["slug", "campaign_44"], ["created_at", "2022-10-29 17:36:00.245049"], ["updated_at", "2022-10-29 17:36:00.245049"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.245407"], ["updated_at", "2022-10-29 17:36:00.245407"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "4332b003-5c98-4d09-8e19-e91d04401437"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "4332b003-5c98-4d09-8e19-e91d04401437"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "4332b003-5c98-4d09-8e19-e91d04401437"], ["created_at", "2022-10-29 17:36:00.246469"], ["updated_at", "2022-10-29 17:36:00.246469"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.246991"], ["updated_at", "2022-10-29 17:36:00.247099"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 143"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.248069"], ["updated_at", "2022-10-29 17:36:00.248069"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 144"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.248500"], ["updated_at", "2022-10-29 17:36:00.248500"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 145"], ["slug", "campaign_45"], ["created_at", "2022-10-29 17:36:00.248852"], ["updated_at", "2022-10-29 17:36:00.248852"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.249219"], ["updated_at", "2022-10-29 17:36:00.249219"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "4b913a03-b80d-4900-8b46-5fdaad1c21d0"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "4b913a03-b80d-4900-8b46-5fdaad1c21d0"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "4b913a03-b80d-4900-8b46-5fdaad1c21d0"], ["created_at", "2022-10-29 17:36:00.250252"], ["updated_at", "2022-10-29 17:36:00.250252"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.250536"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.250593"], ["updated_at", "2022-10-29 17:36:00.250593"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.251219"], ["updated_at", "2022-10-29 17:36:00.251219"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a165726c-1a55-489e-a0d6-be75f0dd292e"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a165726c-1a55-489e-a0d6-be75f0dd292e"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 2], ["token", "a165726c-1a55-489e-a0d6-be75f0dd292e"], ["created_at", "2022-10-29 17:36:00.252194"], ["updated_at", "2022-10-29 17:36:00.252194"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 2], ["send_at", "2022-10-29 17:36:00.252427"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.252469"], ["updated_at", "2022-10-29 17:36:00.252469"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 2]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "skipped_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["skipped_at", "2022-10-29 17:36:00.253097"], ["updated_at", "2022-10-29 17:36:00.253350"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 146"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.254495"], ["updated_at", "2022-10-29 17:36:00.254495"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 147"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.255002"], ["updated_at", "2022-10-29 17:36:00.255002"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 148"], ["slug", "campaign_46"], ["created_at", "2022-10-29 17:36:00.255375"], ["updated_at", "2022-10-29 17:36:00.255375"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.255794"], ["updated_at", "2022-10-29 17:36:00.255794"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "02837a45-94e4-4eb5-840f-1dda98954e4e"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "02837a45-94e4-4eb5-840f-1dda98954e4e"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "02837a45-94e4-4eb5-840f-1dda98954e4e"], ["created_at", "2022-10-29 17:36:00.257118"], ["updated_at", "2022-10-29 17:36:00.257118"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.257445"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.257515"], ["updated_at", "2022-10-29 17:36:00.257515"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.258185"], ["updated_at", "2022-10-29 17:36:00.258185"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "db239b09-512e-444f-a9e3-8b2a75239d3f"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "db239b09-512e-444f-a9e3-8b2a75239d3f"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 2], ["token", "db239b09-512e-444f-a9e3-8b2a75239d3f"], ["created_at", "2022-10-29 17:36:00.259175"], ["updated_at", "2022-10-29 17:36:00.259175"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 2], ["send_at", "2022-10-29 17:36:00.259400"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.259442"], ["updated_at", "2022-10-29 17:36:00.259442"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 2]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "skipped_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["skipped_at", "2022-10-29 17:36:00.260103"], ["updated_at", "2022-10-29 17:36:00.260338"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 149"], ["slug", "callbacks_test_one"], ["created_at", "2022-10-29 17:36:00.261472"], ["updated_at", "2022-10-29 17:36:00.261472"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 150"], ["slug", "callbacks_test_two"], ["created_at", "2022-10-29 17:36:00.261974"], ["updated_at", "2022-10-29 17:36:00.261974"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 151"], ["slug", "campaign_47"], ["created_at", "2022-10-29 17:36:00.262354"], ["updated_at", "2022-10-29 17:36:00.262354"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.262761"], ["updated_at", "2022-10-29 17:36:00.262761"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "0a2c70fa-4b17-4291-be3b-a4f521237c40"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "0a2c70fa-4b17-4291-be3b-a4f521237c40"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "0a2c70fa-4b17-4291-be3b-a4f521237c40"], ["created_at", "2022-10-29 17:36:00.263873"], ["updated_at", "2022-10-29 17:36:00.263873"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.264168"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.264216"], ["updated_at", "2022-10-29 17:36:00.264216"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.264828"], ["updated_at", "2022-10-29 17:36:00.264828"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8f1b9b85-23f6-431b-a79a-16375c69a091"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8f1b9b85-23f6-431b-a79a-16375c69a091"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 3], ["subscriber_type", "Company"], ["subscriber_id", 2], ["token", "8f1b9b85-23f6-431b-a79a-16375c69a091"], ["created_at", "2022-10-29 17:36:00.265783"], ["updated_at", "2022-10-29 17:36:00.265783"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 2], ["send_at", "2022-10-29 17:36:00.266024"], ["mailer_class", "ArgumentMailer"], ["mailer_action", "hello"], ["created_at", "2022-10-29 17:36:00.266066"], ["updated_at", "2022-10-29 17:36:00.266066"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 2]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "skipped_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["skipped_at", "2022-10-29 17:36:00.266668"], ["updated_at", "2022-10-29 17:36:00.266905"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 152"], ["slug", "campaign_test_dripper"], ["created_at", "2022-10-29 17:36:00.267971"], ["updated_at", "2022-10-29 17:36:00.267971"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "campaign_test_dripper"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 153"], ["slug", "campaign_test_dripper"], ["created_at", "2022-10-29 17:36:00.268965"], ["updated_at", "2022-10-29 17:36:00.268965"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 154"], ["slug", "campaign_test_dripper"], ["created_at", "2022-10-29 17:36:00.269695"], ["updated_at", "2022-10-29 17:36:00.269695"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "no_campaign_test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 155"], ["slug", "campaign_test_dripper"], ["created_at", "2022-10-29 17:36:00.270810"], ["updated_at", "2022-10-29 17:36:00.270810"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "funky_drip_thing_dripper"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "funky_drip_thing"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Funky Drip Thing Campaign"], ["slug", "funky_drip_thing"], ["created_at", "2022-10-29 17:36:00.271833"], ["updated_at", "2022-10-29 17:36:00.271833"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 156"], ["slug", "delivery_test_dripper"], ["created_at", "2022-10-29 17:36:00.273278"], ["updated_at", "2022-10-29 17:36:00.273278"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.273933"], ["updated_at", "2022-10-29 17:36:00.273933"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "28@example.com"], ["created_at", "2022-10-29 17:36:00.274312"], ["updated_at", "2022-10-29 17:36:00.274312"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "e65feda4-5216-4bbd-be72-2d3353552f6b"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "e65feda4-5216-4bbd-be72-2d3353552f6b"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "e65feda4-5216-4bbd-be72-2d3353552f6b"], ["created_at", "2022-10-29 17:36:00.275039"], ["updated_at", "2022-10-29 17:36:00.275039"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.275358"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.275412"], ["updated_at", "2022-10-29 17:36:00.275412"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.275660"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "with_params"], ["created_at", "2022-10-29 17:36:00.275698"], ["updated_at", "2022-10-29 17:36:00.275698"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.275904"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye"], ["created_at", "2022-10-29 17:36:00.275962"], ["updated_at", "2022-10-29 17:36:00.275962"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.276157"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_end"], ["created_at", "2022-10-29 17:36:00.276191"], ["updated_at", "2022-10-29 17:36:00.276191"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.276384"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_unsubscribe"], ["created_at", "2022-10-29 17:36:00.276428"], ["updated_at", "2022-10-29 17:36:00.276428"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.277069"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.277123"], ["updated_at", "2022-10-29 17:36:00.277123"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 157"], ["slug", "delivery_test_dripper"], ["created_at", "2022-10-29 17:36:00.278026"], ["updated_at", "2022-10-29 17:36:00.278026"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.278550"], ["updated_at", "2022-10-29 17:36:00.278550"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "29@example.com"], ["created_at", "2022-10-29 17:36:00.278888"], ["updated_at", "2022-10-29 17:36:00.278888"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c8587524-4136-4d08-bce2-19a9bcb1bb91"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c8587524-4136-4d08-bce2-19a9bcb1bb91"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "c8587524-4136-4d08-bce2-19a9bcb1bb91"], ["created_at", "2022-10-29 17:36:00.279532"], ["updated_at", "2022-10-29 17:36:00.279532"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.279822"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.279876"], ["updated_at", "2022-10-29 17:36:00.279876"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.280110"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "with_params"], ["created_at", "2022-10-29 17:36:00.280146"], ["updated_at", "2022-10-29 17:36:00.280146"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.280345"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye"], ["created_at", "2022-10-29 17:36:00.280380"], ["updated_at", "2022-10-29 17:36:00.280380"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.280576"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_end"], ["created_at", "2022-10-29 17:36:00.280618"], ["updated_at", "2022-10-29 17:36:00.280618"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.280807"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_unsubscribe"], ["created_at", "2022-10-29 17:36:00.280841"], ["updated_at", "2022-10-29 17:36:00.280841"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.281425"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.281470"], ["updated_at", "2022-10-29 17:36:00.281470"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
DeliveryTestMailer#welcome: processed outbound mail in 0.4ms
Delivered mail 635d64804512f_ee14f64842cb@eds-MacBook-Pro.mail (0.5ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: bob@example.com
To: hello@example.com
Message-ID: <635d64804512f_ee14f64842cb@eds-MacBook-Pro.mail>
Subject: sup
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/c8587524-4136-4d08-bce2-19a9bcb1bb91/subscribe>

Hi
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.283285"], ["updated_at", "2022-10-29 17:36:00.283375"], ["id", 6]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 158"], ["slug", "delivery_test_dripper"], ["created_at", "2022-10-29 17:36:00.284323"], ["updated_at", "2022-10-29 17:36:00.284323"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.284928"], ["updated_at", "2022-10-29 17:36:00.284928"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "30@example.com"], ["created_at", "2022-10-29 17:36:00.285283"], ["updated_at", "2022-10-29 17:36:00.285283"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c754fafc-0fca-41b5-99e9-e64fde6987b1"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c754fafc-0fca-41b5-99e9-e64fde6987b1"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "c754fafc-0fca-41b5-99e9-e64fde6987b1"], ["created_at", "2022-10-29 17:36:00.285981"], ["updated_at", "2022-10-29 17:36:00.285981"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.286274"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.286329"], ["updated_at", "2022-10-29 17:36:00.286329"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.286586"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "with_params"], ["created_at", "2022-10-29 17:36:00.286637"], ["updated_at", "2022-10-29 17:36:00.286637"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.286839"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye"], ["created_at", "2022-10-29 17:36:00.286879"], ["updated_at", "2022-10-29 17:36:00.286879"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.287077"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_end"], ["created_at", "2022-10-29 17:36:00.287121"], ["updated_at", "2022-10-29 17:36:00.287121"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.287319"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_unsubscribe"], ["created_at", "2022-10-29 17:36:00.287355"], ["updated_at", "2022-10-29 17:36:00.287355"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.288027"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "with_params"], ["created_at", "2022-10-29 17:36:00.288075"], ["updated_at", "2022-10-29 17:36:00.288075"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
DeliveryTestMailer#with_params: processed outbound mail in 0.3ms
Delivered mail 635d6480469c6_ee14f64843b8@eds-MacBook-Pro.mail (0.5ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: hello@examle.com
To: hello@example.com
Message-ID: <635d6480469c6_ee14f64843b8@eds-MacBook-Pro.mail>
Subject: 123
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/c754fafc-0fca-41b5-99e9-e64fde6987b1/subscribe>

hi
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.289584"], ["updated_at", "2022-10-29 17:36:00.289697"], ["id", 6]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 159"], ["slug", "delivery_test_dripper"], ["created_at", "2022-10-29 17:36:00.290928"], ["updated_at", "2022-10-29 17:36:00.290928"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.291525"], ["updated_at", "2022-10-29 17:36:00.291525"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "31@example.com"], ["created_at", "2022-10-29 17:36:00.291926"], ["updated_at", "2022-10-29 17:36:00.291926"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "09cb24af-a71a-4741-936b-ded6ef47abd0"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "09cb24af-a71a-4741-936b-ded6ef47abd0"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "09cb24af-a71a-4741-936b-ded6ef47abd0"], ["created_at", "2022-10-29 17:36:00.292660"], ["updated_at", "2022-10-29 17:36:00.292660"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.292975"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.293027"], ["updated_at", "2022-10-29 17:36:00.293027"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.293272"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "with_params"], ["created_at", "2022-10-29 17:36:00.293313"], ["updated_at", "2022-10-29 17:36:00.293313"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.293521"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye"], ["created_at", "2022-10-29 17:36:00.293558"], ["updated_at", "2022-10-29 17:36:00.293558"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.293763"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_end"], ["created_at", "2022-10-29 17:36:00.293798"], ["updated_at", "2022-10-29 17:36:00.293798"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.293998"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_unsubscribe"], ["created_at", "2022-10-29 17:36:00.294033"], ["updated_at", "2022-10-29 17:36:00.294033"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.294669"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye"], ["created_at", "2022-10-29 17:36:00.294722"], ["updated_at", "2022-10-29 17:36:00.294722"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
DeliveryTestMailer#goodbye: processed outbound mail in 0.3ms
Skipped delivery of mail 635d6480483c1_ee14f6484483@eds-MacBook-Pro.mail as `perform_deliveries` is false
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: bob@example.com
To: hello@example.com
Message-ID: <635d6480483c1_ee14f6484483@eds-MacBook-Pro.mail>
Subject: sup
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/09cb24af-a71a-4741-936b-ded6ef47abd0/subscribe>

Hi
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 160"], ["slug", "delivery_test_dripper"], ["created_at", "2022-10-29 17:36:00.297110"], ["updated_at", "2022-10-29 17:36:00.297110"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.297673"], ["updated_at", "2022-10-29 17:36:00.297673"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "32@example.com"], ["created_at", "2022-10-29 17:36:00.298023"], ["updated_at", "2022-10-29 17:36:00.298023"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a1823d5a-9866-4fbe-b7fc-e45ac660b808"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a1823d5a-9866-4fbe-b7fc-e45ac660b808"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "a1823d5a-9866-4fbe-b7fc-e45ac660b808"], ["created_at", "2022-10-29 17:36:00.298672"], ["updated_at", "2022-10-29 17:36:00.298672"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.298963"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.299016"], ["updated_at", "2022-10-29 17:36:00.299016"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.299260"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "with_params"], ["created_at", "2022-10-29 17:36:00.299300"], ["updated_at", "2022-10-29 17:36:00.299300"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.299512"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye"], ["created_at", "2022-10-29 17:36:00.299551"], ["updated_at", "2022-10-29 17:36:00.299551"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.299752"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_end"], ["created_at", "2022-10-29 17:36:00.299787"], ["updated_at", "2022-10-29 17:36:00.299787"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.299978"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_unsubscribe"], ["created_at", "2022-10-29 17:36:00.300015"], ["updated_at", "2022-10-29 17:36:00.300015"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.300627"], ["mailer_class", "DeliveryTestMailer"], ["mailer_action", "goodbye_end"], ["created_at", "2022-10-29 17:36:00.300676"], ["updated_at", "2022-10-29 17:36:00.300676"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
DeliveryTestMailer#goodbye_end: processed outbound mail in 0.3ms
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.301638"], ["updated_at", "2022-10-29 17:36:00.301767"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
Skipped delivery of mail 635d648049da9_ee14f648455b@eds-MacBook-Pro.mail as `perform_deliveries` is false
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: bob@example.com
To: hello@example.com
Message-ID: <635d648049da9_ee14f648455b@eds-MacBook-Pro.mail>
Subject: sup
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/a1823d5a-9866-4fbe-b7fc-e45ac660b808/subscribe>

Hi
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.2ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.307396"], ["updated_at", "2022-10-29 17:36:00.307396"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "33@example.com"], ["created_at", "2022-10-29 17:36:00.308034"], ["updated_at", "2022-10-29 17:36:00.308034"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.309204"], ["updated_at", "2022-10-29 17:36:00.309204"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "34@example.com"], ["created_at", "2022-10-29 17:36:00.309612"], ["updated_at", "2022-10-29 17:36:00.309612"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.310633"], ["updated_at", "2022-10-29 17:36:00.310633"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "35@example.com"], ["created_at", "2022-10-29 17:36:00.311033"], ["updated_at", "2022-10-29 17:36:00.311033"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.312062"], ["updated_at", "2022-10-29 17:36:00.312062"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "36@example.com"], ["created_at", "2022-10-29 17:36:00.312453"], ["updated_at", "2022-10-29 17:36:00.312453"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.313566"], ["updated_at", "2022-10-29 17:36:00.313566"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "37@example.com"], ["created_at", "2022-10-29 17:36:00.313951"], ["updated_at", "2022-10-29 17:36:00.313951"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 166"], ["slug", "perform_dripper"], ["created_at", "2022-10-29 17:36:00.316457"], ["updated_at", "2022-10-29 17:36:00.316457"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.316989"], ["updated_at", "2022-10-29 17:36:00.316989"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "38@example.com"], ["created_at", "2022-10-29 17:36:00.317349"], ["updated_at", "2022-10-29 17:36:00.317349"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "62ecc35b-1e24-4eb6-9999-72427e0c935d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "62ecc35b-1e24-4eb6-9999-72427e0c935d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "62ecc35b-1e24-4eb6-9999-72427e0c935d"], ["created_at", "2022-10-29 17:36:00.318143"], ["updated_at", "2022-10-29 17:36:00.318143"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 18:36:00.318477"], ["mailer_class", "PerformMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.318531"], ["updated_at", "2022-10-29 17:36:00.318531"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "perform_dripper"], ["LIMIT", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.319412') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["LIMIT", 1000]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 167"], ["slug", "perform_dripper"], ["created_at", "2022-10-29 17:36:00.320781"], ["updated_at", "2022-10-29 17:36:00.320781"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.321369"], ["updated_at", "2022-10-29 17:36:00.321369"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "39@example.com"], ["created_at", "2022-10-29 17:36:00.321761"], ["updated_at", "2022-10-29 17:36:00.321761"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9c486b66-e08e-4543-b0dc-cf901a0ada01"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9c486b66-e08e-4543-b0dc-cf901a0ada01"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "9c486b66-e08e-4543-b0dc-cf901a0ada01"], ["created_at", "2022-10-29 17:36:00.322528"], ["updated_at", "2022-10-29 17:36:00.322528"]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 18:36:00.322855"], ["mailer_class", "PerformMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.322909"], ["updated_at", "2022-10-29 17:36:00.322909"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 19:36:00.323700') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["LIMIT", 1000]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 19:36:00.323700') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_mailings"."id" = ? ORDER BY send_at asc[0m  [["caffeinate_campaign_id", 1], ["id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
PerformMailer#welcome: processed outbound mail in 0.5ms
Delivered mail 635d80a04f9f2_ee14f648466f@eds-MacBook-Pro.mail (0.6ms)
Date: Sat, 29 Oct 2022 14:36:00 -0500
From: test@example.com
To: test@example.com
Message-ID: <635d80a04f9f2_ee14f648466f@eds-MacBook-Pro.mail>
Subject: hello
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/9c486b66-e08e-4543-b0dc-cf901a0ada01/subscribe>

hello
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 19:36:00.326510"], ["updated_at", "2022-10-29 19:36:00.326634"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 19:36:00.327097"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 168"], ["slug", "perform_dripper"], ["created_at", "2022-10-29 17:36:00.328608"], ["updated_at", "2022-10-29 17:36:00.328608"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 169"], ["slug", "periodical_dripper"], ["created_at", "2022-10-29 17:36:00.330171"], ["updated_at", "2022-10-29 17:36:00.330171"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.330712"], ["updated_at", "2022-10-29 17:36:00.330712"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "40@example.com"], ["created_at", "2022-10-29 17:36:00.331070"], ["updated_at", "2022-10-29 17:36:00.331070"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "6418870d-9011-4c81-9a24-43264d8cd53c"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "6418870d-9011-4c81-9a24-43264d8cd53c"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "6418870d-9011-4c81-9a24-43264d8cd53c"], ["created_at", "2022-10-29 17:36:00.331760"], ["updated_at", "2022-10-29 17:36:00.331760"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.332272"], ["mailer_class", "PeriodicalMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.332341"], ["updated_at", "2022-10-29 17:36:00.332341"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 170"], ["slug", "periodical_dripper"], ["created_at", "2022-10-29 17:36:00.333945"], ["updated_at", "2022-10-29 17:36:00.333945"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.334613"], ["updated_at", "2022-10-29 17:36:00.334613"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "41@example.com"], ["created_at", "2022-10-29 17:36:00.335017"], ["updated_at", "2022-10-29 17:36:00.335017"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "61baab0e-6526-4b17-8bd8-7098fc0109cc"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "61baab0e-6526-4b17-8bd8-7098fc0109cc"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "61baab0e-6526-4b17-8bd8-7098fc0109cc"], ["created_at", "2022-10-29 17:36:00.335777"], ["updated_at", "2022-10-29 17:36:00.335777"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.336303"], ["mailer_class", "PeriodicalMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.336357"], ["updated_at", "2022-10-29 17:36:00.336357"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "periodical_dripper"], ["LIMIT", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.337257') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["LIMIT", 1000]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.337257') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_mailings"."id" = ? ORDER BY send_at asc[0m  [["caffeinate_campaign_id", 1], ["id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
PeriodicalMailer#welcome: processed outbound mail in 0.5ms
Delivered mail 635d648052fe7_ee14f64847e3@eds-MacBook-Pro.mail (0.6ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: test@example.com
To: test@example.com
Message-ID: <635d648052fe7_ee14f64847e3@eds-MacBook-Pro.mail>
Subject: hello
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/61baab0e-6526-4b17-8bd8-7098fc0109cc/subscribe>

hello
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.340390"], ["updated_at", "2022-10-29 17:36:00.340555"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 18:36:00.341413"], ["mailer_class", "PeriodicalMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.341708"], ["updated_at", "2022-10-29 17:36:00.341708"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.342027"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 171"], ["slug", "periodical_dripper"], ["created_at", "2022-10-29 17:36:00.343292"], ["updated_at", "2022-10-29 17:36:00.343292"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.343929"], ["updated_at", "2022-10-29 17:36:00.343929"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "42@example.com"], ["created_at", "2022-10-29 17:36:00.344307"], ["updated_at", "2022-10-29 17:36:00.344307"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "194b3157-8418-4b66-ba6a-ab582a884652"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "194b3157-8418-4b66-ba6a-ab582a884652"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "194b3157-8418-4b66-ba6a-ab582a884652"], ["created_at", "2022-10-29 17:36:00.345030"], ["updated_at", "2022-10-29 17:36:00.345030"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.345549"], ["mailer_class", "PeriodicalMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.345610"], ["updated_at", "2022-10-29 17:36:00.345610"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.346431') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["LIMIT", 1000]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.346431') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_mailings"."id" = ? ORDER BY send_at asc[0m  [["caffeinate_campaign_id", 1], ["id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
PeriodicalMailer#welcome: processed outbound mail in 0.3ms
Delivered mail 635d64805509a_ee14f64848cd@eds-MacBook-Pro.mail (0.5ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: test@example.com
To: test@example.com
Message-ID: <635d64805509a_ee14f64848cd@eds-MacBook-Pro.mail>
Subject: hello
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/194b3157-8418-4b66-ba6a-ab582a884652/subscribe>

hello
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.348622"], ["updated_at", "2022-10-29 17:36:00.348723"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 18:36:00.349287"], ["mailer_class", "PeriodicalMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.349503"], ["updated_at", "2022-10-29 17:36:00.349503"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.349772"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 172"], ["slug", "periodical_dripper"], ["created_at", "2022-10-29 17:36:00.350883"], ["updated_at", "2022-10-29 17:36:00.350883"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.351469"], ["updated_at", "2022-10-29 17:36:00.351469"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "43@example.com"], ["created_at", "2022-10-29 17:36:00.351836"], ["updated_at", "2022-10-29 17:36:00.351836"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "588dcce1-686f-478e-8606-77d7b201c2d8"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "588dcce1-686f-478e-8606-77d7b201c2d8"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "588dcce1-686f-478e-8606-77d7b201c2d8"], ["created_at", "2022-10-29 17:36:00.352518"], ["updated_at", "2022-10-29 17:36:00.352518"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.353037"], ["mailer_class", "PeriodicalMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.353092"], ["updated_at", "2022-10-29 17:36:00.353092"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.353816') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["LIMIT", 1000]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.353816') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_mailings"."id" = ? ORDER BY send_at asc[0m  [["caffeinate_campaign_id", 1], ["id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
PeriodicalMailer#welcome: processed outbound mail in 0.3ms
Delivered mail 635d648056df0_ee14f6484990@eds-MacBook-Pro.mail (0.6ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: test@example.com
To: test@example.com
Message-ID: <635d648056df0_ee14f6484990@eds-MacBook-Pro.mail>
Subject: hello
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/588dcce1-686f-478e-8606-77d7b201c2d8/subscribe>

hello
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.356223"], ["updated_at", "2022-10-29 17:36:00.356357"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 18:36:00.357190"], ["mailer_class", "PeriodicalMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.357491"], ["updated_at", "2022-10-29 17:36:00.357491"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.357816"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 173"], ["slug", "periodical_dripper"], ["created_at", "2022-10-29 17:36:00.359307"], ["updated_at", "2022-10-29 17:36:00.359307"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.359951"], ["updated_at", "2022-10-29 17:36:00.359951"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "44@example.com"], ["created_at", "2022-10-29 17:36:00.360341"], ["updated_at", "2022-10-29 17:36:00.360341"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9ce432d9-fc2c-4758-8b15-5c9792c73029"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9ce432d9-fc2c-4758-8b15-5c9792c73029"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "9ce432d9-fc2c-4758-8b15-5c9792c73029"], ["created_at", "2022-10-29 17:36:00.361146"], ["updated_at", "2022-10-29 17:36:00.361146"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:36:00.361673"], ["mailer_class", "PeriodicalMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.361736"], ["updated_at", "2022-10-29 17:36:00.361736"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
Scoped order is ignored, it's forced to be batch order.
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings"."id" FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.362435') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["LIMIT", 1000]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.362435') AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_mailings"."id" = ? ORDER BY send_at asc[0m  [["caffeinate_campaign_id", 1], ["id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
PeriodicalMailer#welcome: processed outbound mail in 0.3ms
Delivered mail 635d648058faa_ee14f6485030@eds-MacBook-Pro.mail (0.5ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: test@example.com
To: test@example.com
Message-ID: <635d648058faa_ee14f6485030@eds-MacBook-Pro.mail>
Subject: hello
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://localhost:3000/caffeinate/campaign_subscriptions/9ce432d9-fc2c-4758-8b15-5c9792c73029/subscribe>

hello
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["sent_at", "2022-10-29 17:36:00.364821"], ["updated_at", "2022-10-29 17:36:00.364917"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ?[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 18:36:00.365491"], ["mailer_class", "PeriodicalMailer"], ["mailer_action", "welcome"], ["created_at", "2022-10-29 17:36:00.365720"], ["updated_at", "2022-10-29 17:36:00.365720"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.365996"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 174"], ["slug", "campaign_subscriptions_controller_test"], ["created_at", "2022-10-29 17:36:00.370146"], ["updated_at", "2022-10-29 17:36:00.370146"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.372314"], ["updated_at", "2022-10-29 17:36:00.372314"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "45@example.com"], ["created_at", "2022-10-29 17:36:00.372921"], ["updated_at", "2022-10-29 17:36:00.372921"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8c493a13-9084-492f-a91c-b4823b08be52"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8c493a13-9084-492f-a91c-b4823b08be52"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "8c493a13-9084-492f-a91c-b4823b08be52"], ["created_at", "2022-10-29 17:36:00.373866"], ["updated_at", "2022-10-29 17:36:00.373866"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
Processing by Caffeinate::CampaignSubscriptionsController#subscribe as HTML
  Parameters: {"token"=>"8c493a13-9084-492f-a91c-b4823b08be52"}
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8c493a13-9084-492f-a91c-b4823b08be52"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "resubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["resubscribed_at", "2022-10-29 17:36:00.375563"], ["updated_at", "2022-10-29 17:36:00.376069"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  Rendering layout /Users/donkey/code/caffeinate/app/views/layouts/_caffeinate.html.erb
  Rendering /Users/donkey/code/caffeinate/app/views/caffeinate/campaign_subscriptions/subscribe.html.erb within layouts/_caffeinate
  Rendered /Users/donkey/code/caffeinate/app/views/caffeinate/campaign_subscriptions/subscribe.html.erb within layouts/_caffeinate (Duration: 2.0ms | Allocations: 2267)
  Rendered layout /Users/donkey/code/caffeinate/app/views/layouts/_caffeinate.html.erb (Duration: 2.1ms | Allocations: 2404)
Completed 200 OK in 5ms (Views: 2.6ms | ActiveRecord: 0.2ms | Allocations: 5059)
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 175"], ["slug", "campaign_subscriptions_controller_test"], ["created_at", "2022-10-29 17:36:00.381407"], ["updated_at", "2022-10-29 17:36:00.381407"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.382034"], ["updated_at", "2022-10-29 17:36:00.382034"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "46@example.com"], ["created_at", "2022-10-29 17:36:00.382411"], ["updated_at", "2022-10-29 17:36:00.382411"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "70f8e34a-5a19-4ad6-940b-60c833a0e025"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "70f8e34a-5a19-4ad6-940b-60c833a0e025"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "70f8e34a-5a19-4ad6-940b-60c833a0e025"], ["created_at", "2022-10-29 17:36:00.383089"], ["updated_at", "2022-10-29 17:36:00.383089"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
Processing by Caffeinate::CampaignSubscriptionsController#unsubscribe as HTML
  Parameters: {"token"=>"70f8e34a-5a19-4ad6-940b-60c833a0e025"}
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "70f8e34a-5a19-4ad6-940b-60c833a0e025"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "unsubscribe_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.384236"], ["unsubscribe_reason", "t"], ["updated_at", "2022-10-29 17:36:00.384700"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  Rendering layout /Users/donkey/code/caffeinate/app/views/layouts/_caffeinate.html.erb
  Rendering /Users/donkey/code/caffeinate/app/views/caffeinate/campaign_subscriptions/unsubscribe.html.erb within layouts/_caffeinate
  Rendered /Users/donkey/code/caffeinate/app/views/caffeinate/campaign_subscriptions/unsubscribe.html.erb within layouts/_caffeinate (Duration: 0.2ms | Allocations: 235)
  Rendered layout /Users/donkey/code/caffeinate/app/views/layouts/_caffeinate.html.erb (Duration: 0.3ms | Allocations: 272)
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.1ms | Allocations: 2075)
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 176"], ["slug", "campaign_subscriptions_controller_test"], ["created_at", "2022-10-29 17:36:00.386744"], ["updated_at", "2022-10-29 17:36:00.386744"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.387396"], ["updated_at", "2022-10-29 17:36:00.387396"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "47@example.com"], ["created_at", "2022-10-29 17:36:00.387766"], ["updated_at", "2022-10-29 17:36:00.387766"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "110364dd-6fc8-4ec8-9fa0-f2441a370f08"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "110364dd-6fc8-4ec8-9fa0-f2441a370f08"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "unsubscribed_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "110364dd-6fc8-4ec8-9fa0-f2441a370f08"], ["unsubscribed_at", "2022-10-29 17:36:00.387188"], ["created_at", "2022-10-29 17:36:00.388478"], ["updated_at", "2022-10-29 17:36:00.388478"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
Processing by Caffeinate::CampaignSubscriptionsController#unsubscribe as HTML
  Parameters: {"token"=>"110364dd-6fc8-4ec8-9fa0-f2441a370f08"}
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "110364dd-6fc8-4ec8-9fa0-f2441a370f08"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "unsubscribe_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.389618"], ["unsubscribe_reason", "t"], ["updated_at", "2022-10-29 17:36:00.390176"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  Rendering layout /Users/donkey/code/caffeinate/app/views/layouts/_caffeinate.html.erb
  Rendering /Users/donkey/code/caffeinate/app/views/caffeinate/campaign_subscriptions/unsubscribe.html.erb within layouts/_caffeinate
  Rendered /Users/donkey/code/caffeinate/app/views/caffeinate/campaign_subscriptions/unsubscribe.html.erb within layouts/_caffeinate (Duration: 0.1ms | Allocations: 109)
  Rendered layout /Users/donkey/code/caffeinate/app/views/layouts/_caffeinate.html.erb (Duration: 0.1ms | Allocations: 146)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms | Allocations: 1768)
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 177"], ["slug", "campaign_subscriptions_controller_test"], ["created_at", "2022-10-29 17:36:00.392196"], ["updated_at", "2022-10-29 17:36:00.392196"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by Caffeinate::CampaignSubscriptionsController#unsubscribe as HTML
  Parameters: {"token"=>"meow"}
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "meow"], ["LIMIT", 1]]
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms | Allocations: 199)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 178"], ["slug", "campaign_subscriptions_controller_test"], ["created_at", "2022-10-29 17:36:00.393776"], ["updated_at", "2022-10-29 17:36:00.393776"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.394314"], ["updated_at", "2022-10-29 17:36:00.394314"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "48@example.com"], ["created_at", "2022-10-29 17:36:00.394678"], ["updated_at", "2022-10-29 17:36:00.394678"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5ccc8d7c-d3b5-4748-a153-e5fa1bc3be48"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5ccc8d7c-d3b5-4748-a153-e5fa1bc3be48"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "5ccc8d7c-d3b5-4748-a153-e5fa1bc3be48"], ["created_at", "2022-10-29 17:36:00.395366"], ["updated_at", "2022-10-29 17:36:00.395366"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 179"], ["slug", "campaign_subscriptions_controller_test"], ["created_at", "2022-10-29 17:36:00.396555"], ["updated_at", "2022-10-29 17:36:00.396555"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.397084"], ["updated_at", "2022-10-29 17:36:00.397084"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "49@example.com"], ["created_at", "2022-10-29 17:36:00.397439"], ["updated_at", "2022-10-29 17:36:00.397439"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5f873382-cae9-49ec-a2d2-a2d2ca3ad193"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5f873382-cae9-49ec-a2d2-a2d2ca3ad193"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "5f873382-cae9-49ec-a2d2-a2d2ca3ad193"], ["created_at", "2022-10-29 17:36:00.398079"], ["updated_at", "2022-10-29 17:36:00.398079"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 180"], ["slug", "campaign_53"], ["created_at", "2022-10-29 17:36:00.399293"], ["updated_at", "2022-10-29 17:36:00.399293"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 181"], ["slug", "campaign_54"], ["created_at", "2022-10-29 17:36:00.400131"], ["updated_at", "2022-10-29 17:36:00.400131"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.400600"], ["updated_at", "2022-10-29 17:36:00.400600"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "38544a08-f8c2-4bdf-a72b-3a2e78f92cc5"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "38544a08-f8c2-4bdf-a72b-3a2e78f92cc5"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "38544a08-f8c2-4bdf-a72b-3a2e78f92cc5"], ["created_at", "2022-10-29 17:36:00.401810"], ["updated_at", "2022-10-29 17:36:00.401810"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 182"], ["slug", "campaign_55"], ["created_at", "2022-10-29 17:36:00.402841"], ["updated_at", "2022-10-29 17:36:00.402841"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.403293"], ["updated_at", "2022-10-29 17:36:00.403293"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3e7540dd-f6f1-40a3-b416-fff1901b35b7"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3e7540dd-f6f1-40a3-b416-fff1901b35b7"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "3e7540dd-f6f1-40a3-b416-fff1901b35b7"], ["created_at", "2022-10-29 17:36:00.404436"], ["updated_at", "2022-10-29 17:36:00.404436"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 183"], ["slug", "campaign_56"], ["created_at", "2022-10-29 17:36:00.405529"], ["updated_at", "2022-10-29 17:36:00.405529"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_id", nil], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 184"], ["slug", "campaign_57"], ["created_at", "2022-10-29 17:36:00.408477"], ["updated_at", "2022-10-29 17:36:00.408477"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.409043"], ["updated_at", "2022-10-29 17:36:00.409043"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "d3b7bb85-053b-4f15-80d7-ff25f85e12d6"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "d3b7bb85-053b-4f15-80d7-ff25f85e12d6"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "d3b7bb85-053b-4f15-80d7-ff25f85e12d6"], ["created_at", "2022-10-29 17:36:00.410235"], ["updated_at", "2022-10-29 17:36:00.410235"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 185"], ["slug", "campaign_58"], ["created_at", "2022-10-29 17:36:00.411460"], ["updated_at", "2022-10-29 17:36:00.411460"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.411895"], ["updated_at", "2022-10-29 17:36:00.411895"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "23e7c6b7-4d5d-4e03-bdf8-71c9c9ecf581"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "23e7c6b7-4d5d-4e03-bdf8-71c9c9ecf581"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "23e7c6b7-4d5d-4e03-bdf8-71c9c9ecf581"], ["created_at", "2022-10-29 17:36:00.412905"], ["updated_at", "2022-10-29 17:36:00.412905"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 186"], ["slug", "campaign_59"], ["created_at", "2022-10-29 17:36:00.414128"], ["updated_at", "2022-10-29 17:36:00.414128"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.414627"], ["updated_at", "2022-10-29 17:36:00.414627"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "25bb73e7-ca89-4d85-bc11-90426e1ab257"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "25bb73e7-ca89-4d85-bc11-90426e1ab257"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "25bb73e7-ca89-4d85-bc11-90426e1ab257"], ["created_at", "2022-10-29 17:36:00.415704"], ["updated_at", "2022-10-29 17:36:00.415704"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 187"], ["slug", "campaign_60"], ["created_at", "2022-10-29 17:36:00.417170"], ["updated_at", "2022-10-29 17:36:00.417170"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.417628"], ["updated_at", "2022-10-29 17:36:00.417628"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2e52af4b-b710-49d3-b1fd-fe6278482a35"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2e52af4b-b710-49d3-b1fd-fe6278482a35"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "2e52af4b-b710-49d3-b1fd-fe6278482a35"], ["created_at", "2022-10-29 17:36:00.418678"], ["updated_at", "2022-10-29 17:36:00.418678"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.419279"], ["updated_at", "2022-10-29 17:36:00.419279"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 188"], ["slug", "campaign_61"], ["created_at", "2022-10-29 17:36:00.420336"], ["updated_at", "2022-10-29 17:36:00.420336"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.420802"], ["updated_at", "2022-10-29 17:36:00.420802"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "0f71f681-cfdc-47fe-b272-2197b8a95392"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "0f71f681-cfdc-47fe-b272-2197b8a95392"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "0f71f681-cfdc-47fe-b272-2197b8a95392"], ["created_at", "2022-10-29 17:36:00.421881"], ["updated_at", "2022-10-29 17:36:00.421881"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 189"], ["slug", "campaign_62"], ["created_at", "2022-10-29 17:36:00.423347"], ["updated_at", "2022-10-29 17:36:00.423347"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.423857"], ["updated_at", "2022-10-29 17:36:00.423857"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a516401a-4220-4621-8cf1-9ca7d6902ff5"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a516401a-4220-4621-8cf1-9ca7d6902ff5"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "a516401a-4220-4621-8cf1-9ca7d6902ff5"], ["created_at", "2022-10-29 17:36:00.424965"], ["updated_at", "2022-10-29 17:36:00.424965"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.425614"], ["updated_at", "2022-10-29 17:36:00.425614"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 190"], ["slug", "campaign_63"], ["created_at", "2022-10-29 17:36:00.426681"], ["updated_at", "2022-10-29 17:36:00.426681"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.427258"], ["updated_at", "2022-10-29 17:36:00.427258"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a131d809-0689-4a2d-a542-d350fa25eb52"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a131d809-0689-4a2d-a542-d350fa25eb52"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "a131d809-0689-4a2d-a542-d350fa25eb52"], ["created_at", "2022-10-29 17:36:00.428400"], ["updated_at", "2022-10-29 17:36:00.428400"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NOT NULL[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.429285"], ["updated_at", "2022-10-29 17:36:00.429735"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NOT NULL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 191"], ["slug", "campaign_64"], ["created_at", "2022-10-29 17:36:00.430930"], ["updated_at", "2022-10-29 17:36:00.430930"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.431385"], ["updated_at", "2022-10-29 17:36:00.431385"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8765581b-e89d-4b69-803d-ac3d6f6c74e4"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "8765581b-e89d-4b69-803d-ac3d6f6c74e4"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["token", "8765581b-e89d-4b69-803d-ac3d6f6c74e4"], ["created_at", "2022-10-29 17:36:00.432462"], ["updated_at", "2022-10-29 17:36:00.432462"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "unsubscribe_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.433370"], ["unsubscribe_reason", "too much pasta"], ["updated_at", "2022-10-29 17:36:00.433815"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 192"], ["slug", "campaign_65"], ["created_at", "2022-10-29 17:36:00.435097"], ["updated_at", "2022-10-29 17:36:00.435097"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.435649"], ["updated_at", "2022-10-29 17:36:00.435649"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "50@example.com"], ["created_at", "2022-10-29 17:36:00.436019"], ["updated_at", "2022-10-29 17:36:00.436019"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "f86ed6a2-3841-4216-bd6a-b8a55a55afc6"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "f86ed6a2-3841-4216-bd6a-b8a55a55afc6"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "f86ed6a2-3841-4216-bd6a-b8a55a55afc6"], ["created_at", "2022-10-29 17:36:00.436698"], ["updated_at", "2022-10-29 17:36:00.436698"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 16:36:00.437340"], ["mailer_class", "Test"], ["mailer_action", "test"], ["created_at", "2022-10-29 17:36:00.437763"], ["updated_at", "2022-10-29 17:36:00.437763"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 18:36:00.438064"], ["mailer_class", "Test"], ["mailer_action", "test"], ["created_at", "2022-10-29 17:36:00.438349"], ["updated_at", "2022-10-29 17:36:00.438349"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.438928') ORDER BY send_at asc, "caffeinate_mailings"."send_at" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 193"], ["slug", "campaign_66"], ["created_at", "2022-10-29 17:36:00.440251"], ["updated_at", "2022-10-29 17:36:00.440251"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.440977"], ["updated_at", "2022-10-29 17:36:00.440977"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "51@example.com"], ["created_at", "2022-10-29 17:36:00.441415"], ["updated_at", "2022-10-29 17:36:00.441415"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3d81ddc9-dde1-40b8-bf0e-341b0c26a344"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3d81ddc9-dde1-40b8-bf0e-341b0c26a344"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "3d81ddc9-dde1-40b8-bf0e-341b0c26a344"], ["created_at", "2022-10-29 17:36:00.443588"], ["updated_at", "2022-10-29 17:36:00.443588"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 16:36:00.444257"], ["mailer_class", "Test"], ["mailer_action", "test"], ["created_at", "2022-10-29 17:36:00.444655"], ["updated_at", "2022-10-29 17:36:00.444655"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 18:36:00.444935"], ["mailer_class", "Test"], ["mailer_action", "test"], ["created_at", "2022-10-29 17:36:00.445259"], ["updated_at", "2022-10-29 17:36:00.445259"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.445500"], ["updated_at", "2022-10-29 17:36:00.445616"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.446463') ORDER BY send_at asc, "caffeinate_mailings"."send_at" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 194"], ["slug", "campaign_67"], ["created_at", "2022-10-29 17:36:00.447547"], ["updated_at", "2022-10-29 17:36:00.447547"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.448136"], ["updated_at", "2022-10-29 17:36:00.448136"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "52@example.com"], ["created_at", "2022-10-29 17:36:00.448518"], ["updated_at", "2022-10-29 17:36:00.448518"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "e88f888f-961a-41e2-b3bb-cb4c404cf399"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "e88f888f-961a-41e2-b3bb-cb4c404cf399"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "e88f888f-961a-41e2-b3bb-cb4c404cf399"], ["created_at", "2022-10-29 17:36:00.449193"], ["updated_at", "2022-10-29 17:36:00.449193"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 16:36:00.449798"], ["mailer_class", "Test"], ["mailer_action", "test"], ["created_at", "2022-10-29 17:36:00.450186"], ["updated_at", "2022-10-29 17:36:00.450186"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 18:36:00.450466"], ["mailer_class", "Test"], ["mailer_action", "test"], ["created_at", "2022-10-29 17:36:00.450764"], ["updated_at", "2022-10-29 17:36:00.450764"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.450976"], ["updated_at", "2022-10-29 17:36:00.451104"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mCaffeinate::Mailing Load (0.1ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaign_subscriptions"."id" = "caffeinate_mailings"."caffeinate_campaign_subscription_id" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL AND "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_mailings"."caffeinate_campaign_subscription_id" IN (SELECT "caffeinate_campaign_subscriptions"."id" FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."unsubscribed_at" IS NULL AND "caffeinate_campaign_subscriptions"."ended_at" IS NULL) AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL AND (send_at < '2022-10-29 17:36:00.451937') ORDER BY send_at asc, "caffeinate_mailings"."send_at" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 195"], ["slug", "campaign_68"], ["created_at", "2022-10-29 17:36:00.453001"], ["updated_at", "2022-10-29 17:36:00.453001"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.453667"], ["updated_at", "2022-10-29 17:36:00.453667"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "53@example.com"], ["created_at", "2022-10-29 17:36:00.454065"], ["updated_at", "2022-10-29 17:36:00.454065"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9d1f3115-4fd8-40c1-a2d9-0fe0360ec4cf"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9d1f3115-4fd8-40c1-a2d9-0fe0360ec4cf"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "9d1f3115-4fd8-40c1-a2d9-0fe0360ec4cf"], ["created_at", "2022-10-29 17:36:00.454781"], ["updated_at", "2022-10-29 17:36:00.454781"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 196"], ["slug", "campaign_69"], ["created_at", "2022-10-29 17:36:00.456119"], ["updated_at", "2022-10-29 17:36:00.456119"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.456861"], ["updated_at", "2022-10-29 17:36:00.456861"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "54@example.com"], ["created_at", "2022-10-29 17:36:00.457347"], ["updated_at", "2022-10-29 17:36:00.457347"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "01327732-9851-4da4-904a-ae5e22459f83"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "01327732-9851-4da4-904a-ae5e22459f83"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "01327732-9851-4da4-904a-ae5e22459f83"], ["created_at", "2022-10-29 17:36:00.458094"], ["updated_at", "2022-10-29 17:36:00.458094"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.458720"], ["updated_at", "2022-10-29 17:36:00.458838"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 197"], ["slug", "campaign_70"], ["created_at", "2022-10-29 17:36:00.460017"], ["updated_at", "2022-10-29 17:36:00.460017"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.460598"], ["updated_at", "2022-10-29 17:36:00.460598"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "55@example.com"], ["created_at", "2022-10-29 17:36:00.460971"], ["updated_at", "2022-10-29 17:36:00.460971"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5c5657be-f79c-460c-a9b4-36d655302e4f"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5c5657be-f79c-460c-a9b4-36d655302e4f"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "5c5657be-f79c-460c-a9b4-36d655302e4f"], ["created_at", "2022-10-29 17:36:00.461636"], ["updated_at", "2022-10-29 17:36:00.461636"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.462234"], ["updated_at", "2022-10-29 17:36:00.462348"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 198"], ["slug", "campaign_71"], ["created_at", "2022-10-29 17:36:00.463825"], ["updated_at", "2022-10-29 17:36:00.463825"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.464402"], ["updated_at", "2022-10-29 17:36:00.464402"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "56@example.com"], ["created_at", "2022-10-29 17:36:00.464783"], ["updated_at", "2022-10-29 17:36:00.464783"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "df96de2c-c32c-4ccc-adf9-01976db08272"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "df96de2c-c32c-4ccc-adf9-01976db08272"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "df96de2c-c32c-4ccc-adf9-01976db08272"], ["created_at", "2022-10-29 17:36:00.465446"], ["updated_at", "2022-10-29 17:36:00.465446"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.466032"], ["updated_at", "2022-10-29 17:36:00.466153"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 199"], ["slug", "campaign_72"], ["created_at", "2022-10-29 17:36:00.467318"], ["updated_at", "2022-10-29 17:36:00.467318"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.467921"], ["updated_at", "2022-10-29 17:36:00.467921"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "57@example.com"], ["created_at", "2022-10-29 17:36:00.468306"], ["updated_at", "2022-10-29 17:36:00.468306"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9f3161aa-c74b-4499-977d-bf8ed8834c56"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9f3161aa-c74b-4499-977d-bf8ed8834c56"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "9f3161aa-c74b-4499-977d-bf8ed8834c56"], ["created_at", "2022-10-29 17:36:00.468976"], ["updated_at", "2022-10-29 17:36:00.468976"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "ended_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.469568"], ["ended_reason", "no more pasta"], ["updated_at", "2022-10-29 17:36:00.469676"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 200"], ["slug", "campaign_73"], ["created_at", "2022-10-29 17:36:00.470877"], ["updated_at", "2022-10-29 17:36:00.470877"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.471515"], ["updated_at", "2022-10-29 17:36:00.471515"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "58@example.com"], ["created_at", "2022-10-29 17:36:00.471909"], ["updated_at", "2022-10-29 17:36:00.471909"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "d704c4ce-f8fe-4b9d-b3df-9fad09470c20"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "d704c4ce-f8fe-4b9d-b3df-9fad09470c20"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "d704c4ce-f8fe-4b9d-b3df-9fad09470c20"], ["created_at", "2022-10-29 17:36:00.472650"], ["updated_at", "2022-10-29 17:36:00.472650"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "ended_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.473330"], ["ended_reason", "no more pasta"], ["updated_at", "2022-10-29 17:36:00.473471"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 201"], ["slug", "campaign_74"], ["created_at", "2022-10-29 17:36:00.475049"], ["updated_at", "2022-10-29 17:36:00.475049"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.475698"], ["updated_at", "2022-10-29 17:36:00.475698"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "59@example.com"], ["created_at", "2022-10-29 17:36:00.476080"], ["updated_at", "2022-10-29 17:36:00.476080"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "b7b07c7d-7609-4100-96fc-57e5fea3a541"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "b7b07c7d-7609-4100-96fc-57e5fea3a541"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "b7b07c7d-7609-4100-96fc-57e5fea3a541"], ["created_at", "2022-10-29 17:36:00.476825"], ["updated_at", "2022-10-29 17:36:00.476825"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "ended_at" = ?, "ended_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["ended_at", "2022-10-29 17:36:00.477928"], ["ended_reason", "no more pasta"], ["updated_at", "2022-10-29 17:36:00.478424"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 202"], ["slug", "campaign_75"], ["created_at", "2022-10-29 17:36:00.480431"], ["updated_at", "2022-10-29 17:36:00.480431"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.481243"], ["updated_at", "2022-10-29 17:36:00.481243"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "60@example.com"], ["created_at", "2022-10-29 17:36:00.481698"], ["updated_at", "2022-10-29 17:36:00.481698"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "70ba82a6-5e52-47fd-8b29-9b3a93ab3e91"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "70ba82a6-5e52-47fd-8b29-9b3a93ab3e91"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "70ba82a6-5e52-47fd-8b29-9b3a93ab3e91"], ["created_at", "2022-10-29 17:36:00.482581"], ["updated_at", "2022-10-29 17:36:00.482581"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 203"], ["slug", "campaign_76"], ["created_at", "2022-10-29 17:36:00.484770"], ["updated_at", "2022-10-29 17:36:00.484770"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.485940"], ["updated_at", "2022-10-29 17:36:00.485940"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "61@example.com"], ["created_at", "2022-10-29 17:36:00.486703"], ["updated_at", "2022-10-29 17:36:00.486703"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "b563bad3-f89d-4483-9a6c-93f009c2c1f0"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "b563bad3-f89d-4483-9a6c-93f009c2c1f0"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "b563bad3-f89d-4483-9a6c-93f009c2c1f0"], ["created_at", "2022-10-29 17:36:00.487990"], ["updated_at", "2022-10-29 17:36:00.487990"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.489301"], ["updated_at", "2022-10-29 17:36:00.489451"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 204"], ["slug", "campaign_77"], ["created_at", "2022-10-29 17:36:00.491769"], ["updated_at", "2022-10-29 17:36:00.491769"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.492731"], ["updated_at", "2022-10-29 17:36:00.492731"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "62@example.com"], ["created_at", "2022-10-29 17:36:00.493528"], ["updated_at", "2022-10-29 17:36:00.493528"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "0e083ed9-a5bc-4d5f-8a10-42bdbf4bd77e"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "0e083ed9-a5bc-4d5f-8a10-42bdbf4bd77e"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "0e083ed9-a5bc-4d5f-8a10-42bdbf4bd77e"], ["created_at", "2022-10-29 17:36:00.494854"], ["updated_at", "2022-10-29 17:36:00.494854"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.495873"], ["updated_at", "2022-10-29 17:36:00.495985"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 205"], ["slug", "campaign_78"], ["created_at", "2022-10-29 17:36:00.498030"], ["updated_at", "2022-10-29 17:36:00.498030"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.499338"], ["updated_at", "2022-10-29 17:36:00.499338"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "63@example.com"], ["created_at", "2022-10-29 17:36:00.500067"], ["updated_at", "2022-10-29 17:36:00.500067"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9a21f262-6e7b-499f-9eb2-52b9a112c3b9"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9a21f262-6e7b-499f-9eb2-52b9a112c3b9"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "9a21f262-6e7b-499f-9eb2-52b9a112c3b9"], ["created_at", "2022-10-29 17:36:00.501641"], ["updated_at", "2022-10-29 17:36:00.501641"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.503040"], ["updated_at", "2022-10-29 17:36:00.503178"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 206"], ["slug", "campaign_79"], ["created_at", "2022-10-29 17:36:00.505825"], ["updated_at", "2022-10-29 17:36:00.505825"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.506928"], ["updated_at", "2022-10-29 17:36:00.506928"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "64@example.com"], ["created_at", "2022-10-29 17:36:00.507746"], ["updated_at", "2022-10-29 17:36:00.507746"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "e222dcff-8100-4f65-91e5-25378ba4dce4"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "e222dcff-8100-4f65-91e5-25378ba4dce4"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "e222dcff-8100-4f65-91e5-25378ba4dce4"], ["created_at", "2022-10-29 17:36:00.509194"], ["updated_at", "2022-10-29 17:36:00.509194"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "unsubscribe_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.510224"], ["unsubscribe_reason", "no more pasta"], ["updated_at", "2022-10-29 17:36:00.510590"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 207"], ["slug", "campaign_80"], ["created_at", "2022-10-29 17:36:00.512848"], ["updated_at", "2022-10-29 17:36:00.512848"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.513926"], ["updated_at", "2022-10-29 17:36:00.513926"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "65@example.com"], ["created_at", "2022-10-29 17:36:00.514637"], ["updated_at", "2022-10-29 17:36:00.514637"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "4bd6dcbf-ab8d-4513-b589-37a8f00f99f3"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "4bd6dcbf-ab8d-4513-b589-37a8f00f99f3"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "4bd6dcbf-ab8d-4513-b589-37a8f00f99f3"], ["created_at", "2022-10-29 17:36:00.515922"], ["updated_at", "2022-10-29 17:36:00.515922"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "unsubscribe_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.516875"], ["unsubscribe_reason", "no more pasta"], ["updated_at", "2022-10-29 17:36:00.516997"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 208"], ["slug", "campaign_81"], ["created_at", "2022-10-29 17:36:00.519040"], ["updated_at", "2022-10-29 17:36:00.519040"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.519968"], ["updated_at", "2022-10-29 17:36:00.519968"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "66@example.com"], ["created_at", "2022-10-29 17:36:00.520609"], ["updated_at", "2022-10-29 17:36:00.520609"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "6dddcd63-af41-4909-a075-280b2ac7512d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "6dddcd63-af41-4909-a075-280b2ac7512d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "6dddcd63-af41-4909-a075-280b2ac7512d"], ["created_at", "2022-10-29 17:36:00.521932"], ["updated_at", "2022-10-29 17:36:00.521932"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "unsubscribed_at" = ?, "unsubscribe_reason" = ?, "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["unsubscribed_at", "2022-10-29 17:36:00.522829"], ["unsubscribe_reason", "no more pasta"], ["updated_at", "2022-10-29 17:36:00.522962"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 209"], ["slug", "campaign_82"], ["created_at", "2022-10-29 17:36:00.525408"], ["updated_at", "2022-10-29 17:36:00.525408"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.526337"], ["updated_at", "2022-10-29 17:36:00.526337"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "67@example.com"], ["created_at", "2022-10-29 17:36:00.526719"], ["updated_at", "2022-10-29 17:36:00.526719"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "934e2cce-bf2b-4356-9e78-5b6b40160a28"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "934e2cce-bf2b-4356-9e78-5b6b40160a28"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "934e2cce-bf2b-4356-9e78-5b6b40160a28"], ["created_at", "2022-10-29 17:36:00.527866"], ["updated_at", "2022-10-29 17:36:00.527866"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 210"], ["slug", "campaign_83"], ["created_at", "2022-10-29 17:36:00.529607"], ["updated_at", "2022-10-29 17:36:00.529607"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.530786"], ["updated_at", "2022-10-29 17:36:00.530786"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "68@example.com"], ["created_at", "2022-10-29 17:36:00.531145"], ["updated_at", "2022-10-29 17:36:00.531145"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "d03fbdc0-65d9-4f1b-a147-a92c52a9e2e2"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "d03fbdc0-65d9-4f1b-a147-a92c52a9e2e2"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "d03fbdc0-65d9-4f1b-a147-a92c52a9e2e2"], ["created_at", "2022-10-29 17:36:00.532299"], ["updated_at", "2022-10-29 17:36:00.532299"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 211"], ["slug", "campaign_84"], ["created_at", "2022-10-29 17:36:00.534173"], ["updated_at", "2022-10-29 17:36:00.534173"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.539802"], ["updated_at", "2022-10-29 17:36:00.539802"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "69@example.com"], ["created_at", "2022-10-29 17:36:00.540471"], ["updated_at", "2022-10-29 17:36:00.540471"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "b65583f2-20f5-4448-8af3-70e8fdd4bf4a"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "b65583f2-20f5-4448-8af3-70e8fdd4bf4a"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "b65583f2-20f5-4448-8af3-70e8fdd4bf4a"], ["created_at", "2022-10-29 17:36:00.541301"], ["updated_at", "2022-10-29 17:36:00.541301"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 212"], ["slug", "campaign_85"], ["created_at", "2022-10-29 17:36:00.542894"], ["updated_at", "2022-10-29 17:36:00.542894"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.543461"], ["updated_at", "2022-10-29 17:36:00.543461"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "70@example.com"], ["created_at", "2022-10-29 17:36:00.543821"], ["updated_at", "2022-10-29 17:36:00.543821"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "b91ee9eb-b7bb-491e-964f-f659b35b28cd"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "b91ee9eb-b7bb-491e-964f-f659b35b28cd"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "b91ee9eb-b7bb-491e-964f-f659b35b28cd"], ["created_at", "2022-10-29 17:36:00.544451"], ["updated_at", "2022-10-29 17:36:00.544451"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 213"], ["slug", "campaign_86"], ["created_at", "2022-10-29 17:36:00.545520"], ["updated_at", "2022-10-29 17:36:00.545520"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.546063"], ["updated_at", "2022-10-29 17:36:00.546063"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "71@example.com"], ["created_at", "2022-10-29 17:36:00.546411"], ["updated_at", "2022-10-29 17:36:00.546411"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3fd6f253-b0c8-4680-8e90-655d8f12a2d7"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "3fd6f253-b0c8-4680-8e90-655d8f12a2d7"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "3fd6f253-b0c8-4680-8e90-655d8f12a2d7"], ["created_at", "2022-10-29 17:36:00.547053"], ["updated_at", "2022-10-29 17:36:00.547053"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 214"], ["slug", "campaign_87"], ["created_at", "2022-10-29 17:36:00.548655"], ["updated_at", "2022-10-29 17:36:00.548655"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "72@example.com"], ["created_at", "2022-10-29 17:36:00.549144"], ["updated_at", "2022-10-29 17:36:00.549144"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."slug" = ? LIMIT ?[0m  [["slug", "campaign_87"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" = ? AND "caffeinate_campaign_subscriptions"."subscriber_type" = ? AND "caffeinate_campaign_subscriptions"."subscriber_id" = ? LIMIT ?[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "User"], ["subscriber_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "ca816fc4-78bc-4586-99d9-9b2b73474831"], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "ca816fc4-78bc-4586-99d9-9b2b73474831"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 215"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.551278"], ["updated_at", "2022-10-29 17:36:00.551278"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.551812"], ["updated_at", "2022-10-29 17:36:00.551812"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "73@example.com"], ["created_at", "2022-10-29 17:36:00.552156"], ["updated_at", "2022-10-29 17:36:00.552156"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "d8eedc6e-ce79-43ed-ae56-ee6bb69572cf"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "d8eedc6e-ce79-43ed-ae56-ee6bb69572cf"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "d8eedc6e-ce79-43ed-ae56-ee6bb69572cf"], ["created_at", "2022-10-29 17:36:00.552793"], ["updated_at", "2022-10-29 17:36:00.552793"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.553559"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.553637"], ["updated_at", "2022-10-29 17:36:00.553637"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.554068"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.554129"], ["updated_at", "2022-10-29 17:36:00.554129"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.554498"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.554546"], ["updated_at", "2022-10-29 17:36:00.554546"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.554901"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.554949"], ["updated_at", "2022-10-29 17:36:00.554949"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.555302"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.555356"], ["updated_at", "2022-10-29 17:36:00.555356"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.555728"], ["sent_at", "2022-10-29 17:36:00.555738"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.555787"], ["updated_at", "2022-10-29 17:36:00.555787"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.556176"], ["sent_at", "2022-10-29 17:36:00.556187"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.556237"], ["updated_at", "2022-10-29 17:36:00.556237"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.556631"], ["sent_at", "2022-10-29 17:36:00.556641"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.556683"], ["updated_at", "2022-10-29 17:36:00.556683"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.557163"], ["skipped_at", "2022-10-29 17:36:00.557174"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.557218"], ["updated_at", "2022-10-29 17:36:00.557218"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.557616"], ["skipped_at", "2022-10-29 17:36:00.557626"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.557666"], ["updated_at", "2022-10-29 17:36:00.557666"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 216"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.559187"], ["updated_at", "2022-10-29 17:36:00.559187"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.559772"], ["updated_at", "2022-10-29 17:36:00.559772"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "74@example.com"], ["created_at", "2022-10-29 17:36:00.560125"], ["updated_at", "2022-10-29 17:36:00.560125"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "1044abe6-18c4-458b-a864-4260733cda07"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "1044abe6-18c4-458b-a864-4260733cda07"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "1044abe6-18c4-458b-a864-4260733cda07"], ["created_at", "2022-10-29 17:36:00.560804"], ["updated_at", "2022-10-29 17:36:00.560804"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.561575"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.561640"], ["updated_at", "2022-10-29 17:36:00.561640"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.562055"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.562116"], ["updated_at", "2022-10-29 17:36:00.562116"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.562468"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.562516"], ["updated_at", "2022-10-29 17:36:00.562516"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.562876"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.562923"], ["updated_at", "2022-10-29 17:36:00.562923"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.563288"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.563334"], ["updated_at", "2022-10-29 17:36:00.563334"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.563708"], ["sent_at", "2022-10-29 17:36:00.563718"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.563755"], ["updated_at", "2022-10-29 17:36:00.563755"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.564131"], ["sent_at", "2022-10-29 17:36:00.564141"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.564192"], ["updated_at", "2022-10-29 17:36:00.564192"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.564540"], ["sent_at", "2022-10-29 17:36:00.564549"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.564593"], ["updated_at", "2022-10-29 17:36:00.564593"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.564945"], ["skipped_at", "2022-10-29 17:36:00.564955"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.564992"], ["updated_at", "2022-10-29 17:36:00.564992"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.565341"], ["skipped_at", "2022-10-29 17:36:00.565351"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.565398"], ["updated_at", "2022-10-29 17:36:00.565398"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NOT NULL[0m
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NOT NULL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 217"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.566761"], ["updated_at", "2022-10-29 17:36:00.566761"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.567307"], ["updated_at", "2022-10-29 17:36:00.567307"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "75@example.com"], ["created_at", "2022-10-29 17:36:00.567653"], ["updated_at", "2022-10-29 17:36:00.567653"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "db9603ce-a397-4532-9123-955daebd16cd"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "db9603ce-a397-4532-9123-955daebd16cd"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "db9603ce-a397-4532-9123-955daebd16cd"], ["created_at", "2022-10-29 17:36:00.568325"], ["updated_at", "2022-10-29 17:36:00.568325"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.569001"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.569063"], ["updated_at", "2022-10-29 17:36:00.569063"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.569483"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.569539"], ["updated_at", "2022-10-29 17:36:00.569539"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.569924"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.569985"], ["updated_at", "2022-10-29 17:36:00.569985"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.570347"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.570395"], ["updated_at", "2022-10-29 17:36:00.570395"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.570743"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.570790"], ["updated_at", "2022-10-29 17:36:00.570790"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.571150"], ["sent_at", "2022-10-29 17:36:00.571160"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.571199"], ["updated_at", "2022-10-29 17:36:00.571199"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.571556"], ["sent_at", "2022-10-29 17:36:00.571566"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.571612"], ["updated_at", "2022-10-29 17:36:00.571612"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.571978"], ["sent_at", "2022-10-29 17:36:00.571988"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.572027"], ["updated_at", "2022-10-29 17:36:00.572027"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.572397"], ["skipped_at", "2022-10-29 17:36:00.572407"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.572455"], ["updated_at", "2022-10-29 17:36:00.572455"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.572840"], ["skipped_at", "2022-10-29 17:36:00.572852"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.572893"], ["updated_at", "2022-10-29 17:36:00.572893"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."skipped_at" IS NOT NULL[0m
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."skipped_at" IS NOT NULL[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."skipped_at" IS NULL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 218"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.574461"], ["updated_at", "2022-10-29 17:36:00.574461"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.575064"], ["updated_at", "2022-10-29 17:36:00.575064"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "76@example.com"], ["created_at", "2022-10-29 17:36:00.575427"], ["updated_at", "2022-10-29 17:36:00.575427"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "0c75505c-4b7a-4864-9b7d-5a99117a86c8"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "0c75505c-4b7a-4864-9b7d-5a99117a86c8"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "0c75505c-4b7a-4864-9b7d-5a99117a86c8"], ["created_at", "2022-10-29 17:36:00.576108"], ["updated_at", "2022-10-29 17:36:00.576108"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.576826"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.576889"], ["updated_at", "2022-10-29 17:36:00.576889"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.577352"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.577406"], ["updated_at", "2022-10-29 17:36:00.577406"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.577779"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.577827"], ["updated_at", "2022-10-29 17:36:00.577827"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.578184"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.578230"], ["updated_at", "2022-10-29 17:36:00.578230"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.578574"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.578620"], ["updated_at", "2022-10-29 17:36:00.578620"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.578965"], ["sent_at", "2022-10-29 17:36:00.578975"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.579015"], ["updated_at", "2022-10-29 17:36:00.579015"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.579368"], ["sent_at", "2022-10-29 17:36:00.579377"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.579423"], ["updated_at", "2022-10-29 17:36:00.579423"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.579773"], ["sent_at", "2022-10-29 17:36:00.579783"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.579830"], ["updated_at", "2022-10-29 17:36:00.579830"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.580191"], ["skipped_at", "2022-10-29 17:36:00.580201"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.580246"], ["updated_at", "2022-10-29 17:36:00.580246"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.580610"], ["skipped_at", "2022-10-29 17:36:00.580619"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.580662"], ["updated_at", "2022-10-29 17:36:00.580662"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.581159"], ["updated_at", "2022-10-29 17:36:00.581159"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "77@example.com"], ["created_at", "2022-10-29 17:36:00.581506"], ["updated_at", "2022-10-29 17:36:00.581506"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c4f977b7-d61a-4863-8fa5-3556d2067f20"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c4f977b7-d61a-4863-8fa5-3556d2067f20"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 2], ["user_type", "User"], ["user_id", 2], ["token", "c4f977b7-d61a-4863-8fa5-3556d2067f20"], ["created_at", "2022-10-29 17:36:00.582141"], ["updated_at", "2022-10-29 17:36:00.582141"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 2]]
[ActiveJob] Enqueued MyJob (Job ID: 96cb66a4-8710-4b10-8097-799b93d28b1f) to Test(default)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.582882"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 219"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.584021"], ["updated_at", "2022-10-29 17:36:00.584021"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.584597"], ["updated_at", "2022-10-29 17:36:00.584597"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "78@example.com"], ["created_at", "2022-10-29 17:36:00.584957"], ["updated_at", "2022-10-29 17:36:00.584957"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2803b827-f985-46c9-83c2-4c04cdfe63d6"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2803b827-f985-46c9-83c2-4c04cdfe63d6"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "2803b827-f985-46c9-83c2-4c04cdfe63d6"], ["created_at", "2022-10-29 17:36:00.585673"], ["updated_at", "2022-10-29 17:36:00.585673"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.586363"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.586437"], ["updated_at", "2022-10-29 17:36:00.586437"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.586891"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.586945"], ["updated_at", "2022-10-29 17:36:00.586945"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.587330"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.587381"], ["updated_at", "2022-10-29 17:36:00.587381"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.587776"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.587827"], ["updated_at", "2022-10-29 17:36:00.587827"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.588210"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.588260"], ["updated_at", "2022-10-29 17:36:00.588260"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.588639"], ["sent_at", "2022-10-29 17:36:00.588651"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.588693"], ["updated_at", "2022-10-29 17:36:00.588693"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.589081"], ["sent_at", "2022-10-29 17:36:00.589099"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.589143"], ["updated_at", "2022-10-29 17:36:00.589143"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.589582"], ["sent_at", "2022-10-29 17:36:00.589592"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.589647"], ["updated_at", "2022-10-29 17:36:00.589647"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.590109"], ["skipped_at", "2022-10-29 17:36:00.590125"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.590177"], ["updated_at", "2022-10-29 17:36:00.590177"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.590567"], ["skipped_at", "2022-10-29 17:36:00.590582"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.590628"], ["updated_at", "2022-10-29 17:36:00.590628"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 220"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.591630"], ["updated_at", "2022-10-29 17:36:00.591630"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.592277"], ["updated_at", "2022-10-29 17:36:00.592277"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "79@example.com"], ["created_at", "2022-10-29 17:36:00.592710"], ["updated_at", "2022-10-29 17:36:00.592710"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2ac0566a-f90b-4e85-98c2-3ac80414bbfe"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2ac0566a-f90b-4e85-98c2-3ac80414bbfe"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "2ac0566a-f90b-4e85-98c2-3ac80414bbfe"], ["created_at", "2022-10-29 17:36:00.594770"], ["updated_at", "2022-10-29 17:36:00.594770"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.595528"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.595597"], ["updated_at", "2022-10-29 17:36:00.595597"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.596020"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.596069"], ["updated_at", "2022-10-29 17:36:00.596069"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.596427"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.596474"], ["updated_at", "2022-10-29 17:36:00.596474"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.596815"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.596870"], ["updated_at", "2022-10-29 17:36:00.596870"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.597226"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.597271"], ["updated_at", "2022-10-29 17:36:00.597271"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.597624"], ["sent_at", "2022-10-29 17:36:00.597634"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.597674"], ["updated_at", "2022-10-29 17:36:00.597674"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.598023"], ["sent_at", "2022-10-29 17:36:00.598032"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.598070"], ["updated_at", "2022-10-29 17:36:00.598070"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.598409"], ["sent_at", "2022-10-29 17:36:00.598418"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.598464"], ["updated_at", "2022-10-29 17:36:00.598464"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.598806"], ["skipped_at", "2022-10-29 17:36:00.598815"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.598852"], ["updated_at", "2022-10-29 17:36:00.598852"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.599199"], ["skipped_at", "2022-10-29 17:36:00.599208"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.599245"], ["updated_at", "2022-10-29 17:36:00.599245"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 221"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.600223"], ["updated_at", "2022-10-29 17:36:00.600223"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.600811"], ["updated_at", "2022-10-29 17:36:00.600811"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "80@example.com"], ["created_at", "2022-10-29 17:36:00.601190"], ["updated_at", "2022-10-29 17:36:00.601190"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a3a22606-66d6-4855-8246-9df9e2848dae"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "a3a22606-66d6-4855-8246-9df9e2848dae"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "a3a22606-66d6-4855-8246-9df9e2848dae"], ["created_at", "2022-10-29 17:36:00.601929"], ["updated_at", "2022-10-29 17:36:00.601929"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.602656"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.602726"], ["updated_at", "2022-10-29 17:36:00.602726"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.603169"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.603220"], ["updated_at", "2022-10-29 17:36:00.603220"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.603596"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.603649"], ["updated_at", "2022-10-29 17:36:00.603649"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.604008"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.604055"], ["updated_at", "2022-10-29 17:36:00.604055"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.604399"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.604457"], ["updated_at", "2022-10-29 17:36:00.604457"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.604814"], ["sent_at", "2022-10-29 17:36:00.604824"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.604864"], ["updated_at", "2022-10-29 17:36:00.604864"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.605219"], ["sent_at", "2022-10-29 17:36:00.605229"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.605277"], ["updated_at", "2022-10-29 17:36:00.605277"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.605672"], ["sent_at", "2022-10-29 17:36:00.605682"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.605722"], ["updated_at", "2022-10-29 17:36:00.605722"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.606102"], ["skipped_at", "2022-10-29 17:36:00.606112"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.606162"], ["updated_at", "2022-10-29 17:36:00.606162"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.606613"], ["skipped_at", "2022-10-29 17:36:00.606625"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.606681"], ["updated_at", "2022-10-29 17:36:00.606681"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 222"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.608011"], ["updated_at", "2022-10-29 17:36:00.608011"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.608585"], ["updated_at", "2022-10-29 17:36:00.608585"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "81@example.com"], ["created_at", "2022-10-29 17:36:00.608943"], ["updated_at", "2022-10-29 17:36:00.608943"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9d7ad4a2-083f-413b-b4d2-5ed5ac5d84ff"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9d7ad4a2-083f-413b-b4d2-5ed5ac5d84ff"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "9d7ad4a2-083f-413b-b4d2-5ed5ac5d84ff"], ["created_at", "2022-10-29 17:36:00.609723"], ["updated_at", "2022-10-29 17:36:00.609723"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.610456"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.610527"], ["updated_at", "2022-10-29 17:36:00.610527"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.610936"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.610994"], ["updated_at", "2022-10-29 17:36:00.610994"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.611348"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.611396"], ["updated_at", "2022-10-29 17:36:00.611396"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.611744"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.611800"], ["updated_at", "2022-10-29 17:36:00.611800"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.612136"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.612195"], ["updated_at", "2022-10-29 17:36:00.612195"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.612541"], ["sent_at", "2022-10-29 17:36:00.612550"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.612590"], ["updated_at", "2022-10-29 17:36:00.612590"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.612951"], ["sent_at", "2022-10-29 17:36:00.612960"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.613006"], ["updated_at", "2022-10-29 17:36:00.613006"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.613362"], ["sent_at", "2022-10-29 17:36:00.613372"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.613420"], ["updated_at", "2022-10-29 17:36:00.613420"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.613793"], ["skipped_at", "2022-10-29 17:36:00.613802"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.613840"], ["updated_at", "2022-10-29 17:36:00.613840"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.614185"], ["skipped_at", "2022-10-29 17:36:00.614201"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.614238"], ["updated_at", "2022-10-29 17:36:00.614238"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 223"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.615588"], ["updated_at", "2022-10-29 17:36:00.615588"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.616168"], ["updated_at", "2022-10-29 17:36:00.616168"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "82@example.com"], ["created_at", "2022-10-29 17:36:00.616521"], ["updated_at", "2022-10-29 17:36:00.616521"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c96a3f5d-2b55-4755-b90e-f584259d8317"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "c96a3f5d-2b55-4755-b90e-f584259d8317"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "c96a3f5d-2b55-4755-b90e-f584259d8317"], ["created_at", "2022-10-29 17:36:00.617210"], ["updated_at", "2022-10-29 17:36:00.617210"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.617967"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.618037"], ["updated_at", "2022-10-29 17:36:00.618037"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.618520"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.618584"], ["updated_at", "2022-10-29 17:36:00.618584"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.619014"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.619064"], ["updated_at", "2022-10-29 17:36:00.619064"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.619436"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.619496"], ["updated_at", "2022-10-29 17:36:00.619496"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.619875"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.619925"], ["updated_at", "2022-10-29 17:36:00.619925"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.620308"], ["sent_at", "2022-10-29 17:36:00.620318"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.620359"], ["updated_at", "2022-10-29 17:36:00.620359"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.620739"], ["sent_at", "2022-10-29 17:36:00.620749"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.620792"], ["updated_at", "2022-10-29 17:36:00.620792"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.621188"], ["sent_at", "2022-10-29 17:36:00.621199"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.621242"], ["updated_at", "2022-10-29 17:36:00.621242"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.621633"], ["skipped_at", "2022-10-29 17:36:00.621651"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.621694"], ["updated_at", "2022-10-29 17:36:00.621694"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.622089"], ["skipped_at", "2022-10-29 17:36:00.622099"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.622140"], ["updated_at", "2022-10-29 17:36:00.622140"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 224"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.623538"], ["updated_at", "2022-10-29 17:36:00.623538"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.624243"], ["updated_at", "2022-10-29 17:36:00.624243"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "83@example.com"], ["created_at", "2022-10-29 17:36:00.624647"], ["updated_at", "2022-10-29 17:36:00.624647"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "32133da9-b0f1-4846-be42-8b7402b2a834"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "32133da9-b0f1-4846-be42-8b7402b2a834"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "32133da9-b0f1-4846-be42-8b7402b2a834"], ["created_at", "2022-10-29 17:36:00.625518"], ["updated_at", "2022-10-29 17:36:00.625518"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.626400"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.626484"], ["updated_at", "2022-10-29 17:36:00.626484"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.626910"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.626960"], ["updated_at", "2022-10-29 17:36:00.626960"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.627336"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.627393"], ["updated_at", "2022-10-29 17:36:00.627393"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.627752"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.627801"], ["updated_at", "2022-10-29 17:36:00.627801"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.628153"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.628204"], ["updated_at", "2022-10-29 17:36:00.628204"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.628584"], ["sent_at", "2022-10-29 17:36:00.628603"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.628645"], ["updated_at", "2022-10-29 17:36:00.628645"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.629027"], ["sent_at", "2022-10-29 17:36:00.629044"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.629112"], ["updated_at", "2022-10-29 17:36:00.629112"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.629501"], ["sent_at", "2022-10-29 17:36:00.629511"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.629559"], ["updated_at", "2022-10-29 17:36:00.629559"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.629919"], ["skipped_at", "2022-10-29 17:36:00.629929"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.629980"], ["updated_at", "2022-10-29 17:36:00.629980"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.630350"], ["skipped_at", "2022-10-29 17:36:00.630359"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.630398"], ["updated_at", "2022-10-29 17:36:00.630398"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 225"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.631385"], ["updated_at", "2022-10-29 17:36:00.631385"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.631979"], ["updated_at", "2022-10-29 17:36:00.631979"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "84@example.com"], ["created_at", "2022-10-29 17:36:00.632354"], ["updated_at", "2022-10-29 17:36:00.632354"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9a9e1715-ba6f-4de9-8eb8-57c0c5e4c7f9"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9a9e1715-ba6f-4de9-8eb8-57c0c5e4c7f9"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "9a9e1715-ba6f-4de9-8eb8-57c0c5e4c7f9"], ["created_at", "2022-10-29 17:36:00.633182"], ["updated_at", "2022-10-29 17:36:00.633182"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.633987"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.634057"], ["updated_at", "2022-10-29 17:36:00.634057"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.634483"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.634537"], ["updated_at", "2022-10-29 17:36:00.634537"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.634898"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.634949"], ["updated_at", "2022-10-29 17:36:00.634949"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.635308"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.635360"], ["updated_at", "2022-10-29 17:36:00.635360"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.635717"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.635767"], ["updated_at", "2022-10-29 17:36:00.635767"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.636117"], ["sent_at", "2022-10-29 17:36:00.636135"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.636176"], ["updated_at", "2022-10-29 17:36:00.636176"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.636570"], ["sent_at", "2022-10-29 17:36:00.636580"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.636624"], ["updated_at", "2022-10-29 17:36:00.636624"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.637000"], ["sent_at", "2022-10-29 17:36:00.637010"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.637052"], ["updated_at", "2022-10-29 17:36:00.637052"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.637427"], ["skipped_at", "2022-10-29 17:36:00.637439"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.637484"], ["updated_at", "2022-10-29 17:36:00.637484"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.637846"], ["skipped_at", "2022-10-29 17:36:00.637856"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.637897"], ["updated_at", "2022-10-29 17:36:00.637897"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 226"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.638893"], ["updated_at", "2022-10-29 17:36:00.638893"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.639541"], ["updated_at", "2022-10-29 17:36:00.639541"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "85@example.com"], ["created_at", "2022-10-29 17:36:00.639974"], ["updated_at", "2022-10-29 17:36:00.639974"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2b30c4ec-29f1-4822-9fd7-6d8abbd16a3c"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2b30c4ec-29f1-4822-9fd7-6d8abbd16a3c"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "2b30c4ec-29f1-4822-9fd7-6d8abbd16a3c"], ["created_at", "2022-10-29 17:36:00.640744"], ["updated_at", "2022-10-29 17:36:00.640744"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.641549"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.641617"], ["updated_at", "2022-10-29 17:36:00.641617"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.642055"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.642107"], ["updated_at", "2022-10-29 17:36:00.642107"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.642469"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.642517"], ["updated_at", "2022-10-29 17:36:00.642517"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.642879"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.642936"], ["updated_at", "2022-10-29 17:36:00.642936"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.643306"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.643361"], ["updated_at", "2022-10-29 17:36:00.643361"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.643739"], ["sent_at", "2022-10-29 17:36:00.643751"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.643797"], ["updated_at", "2022-10-29 17:36:00.643797"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.645344"], ["sent_at", "2022-10-29 17:36:00.645357"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.645404"], ["updated_at", "2022-10-29 17:36:00.645404"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.645800"], ["sent_at", "2022-10-29 17:36:00.645809"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.645846"], ["updated_at", "2022-10-29 17:36:00.645846"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.646192"], ["skipped_at", "2022-10-29 17:36:00.646201"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.646247"], ["updated_at", "2022-10-29 17:36:00.646247"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.646597"], ["skipped_at", "2022-10-29 17:36:00.646606"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.646643"], ["updated_at", "2022-10-29 17:36:00.646643"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 227"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.647721"], ["updated_at", "2022-10-29 17:36:00.647721"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.648295"], ["updated_at", "2022-10-29 17:36:00.648295"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "86@example.com"], ["created_at", "2022-10-29 17:36:00.648644"], ["updated_at", "2022-10-29 17:36:00.648644"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9148663d-9df3-4795-8001-cf461642685e"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "9148663d-9df3-4795-8001-cf461642685e"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "9148663d-9df3-4795-8001-cf461642685e"], ["created_at", "2022-10-29 17:36:00.649332"], ["updated_at", "2022-10-29 17:36:00.649332"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.650128"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.650192"], ["updated_at", "2022-10-29 17:36:00.650192"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.650595"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.650643"], ["updated_at", "2022-10-29 17:36:00.650643"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.651002"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.651057"], ["updated_at", "2022-10-29 17:36:00.651057"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.651404"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.651454"], ["updated_at", "2022-10-29 17:36:00.651454"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.651809"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.651864"], ["updated_at", "2022-10-29 17:36:00.651864"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.652202"], ["sent_at", "2022-10-29 17:36:00.652212"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.652250"], ["updated_at", "2022-10-29 17:36:00.652250"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.652606"], ["sent_at", "2022-10-29 17:36:00.652615"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.652660"], ["updated_at", "2022-10-29 17:36:00.652660"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.653019"], ["sent_at", "2022-10-29 17:36:00.653029"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.653069"], ["updated_at", "2022-10-29 17:36:00.653069"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.653451"], ["skipped_at", "2022-10-29 17:36:00.653461"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.653517"], ["updated_at", "2022-10-29 17:36:00.653517"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.653877"], ["skipped_at", "2022-10-29 17:36:00.653886"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.653936"], ["updated_at", "2022-10-29 17:36:00.653936"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 228"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.655016"], ["updated_at", "2022-10-29 17:36:00.655016"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.655569"], ["updated_at", "2022-10-29 17:36:00.655569"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "87@example.com"], ["created_at", "2022-10-29 17:36:00.655941"], ["updated_at", "2022-10-29 17:36:00.655941"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "137ceef5-b3d1-4079-8cc3-80e483f6b2dc"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "137ceef5-b3d1-4079-8cc3-80e483f6b2dc"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "137ceef5-b3d1-4079-8cc3-80e483f6b2dc"], ["created_at", "2022-10-29 17:36:00.656707"], ["updated_at", "2022-10-29 17:36:00.656707"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.657605"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.657701"], ["updated_at", "2022-10-29 17:36:00.657701"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.658106"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.658153"], ["updated_at", "2022-10-29 17:36:00.658153"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.658500"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.658545"], ["updated_at", "2022-10-29 17:36:00.658545"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.658944"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.659002"], ["updated_at", "2022-10-29 17:36:00.659002"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.659368"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.659415"], ["updated_at", "2022-10-29 17:36:00.659415"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.659781"], ["sent_at", "2022-10-29 17:36:00.659791"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.659832"], ["updated_at", "2022-10-29 17:36:00.659832"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.660205"], ["sent_at", "2022-10-29 17:36:00.660216"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.660264"], ["updated_at", "2022-10-29 17:36:00.660264"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.660632"], ["sent_at", "2022-10-29 17:36:00.660642"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.660683"], ["updated_at", "2022-10-29 17:36:00.660683"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.661049"], ["skipped_at", "2022-10-29 17:36:00.661058"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.661107"], ["updated_at", "2022-10-29 17:36:00.661107"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.661464"], ["skipped_at", "2022-10-29 17:36:00.661473"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.661518"], ["updated_at", "2022-10-29 17:36:00.661518"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 229"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.662572"], ["updated_at", "2022-10-29 17:36:00.662572"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.663146"], ["updated_at", "2022-10-29 17:36:00.663146"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "88@example.com"], ["created_at", "2022-10-29 17:36:00.663512"], ["updated_at", "2022-10-29 17:36:00.663512"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "6d350928-bbd7-48d8-9660-eff02306c1de"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "6d350928-bbd7-48d8-9660-eff02306c1de"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "6d350928-bbd7-48d8-9660-eff02306c1de"], ["created_at", "2022-10-29 17:36:00.664213"], ["updated_at", "2022-10-29 17:36:00.664213"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.664972"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.665040"], ["updated_at", "2022-10-29 17:36:00.665040"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.665466"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.665517"], ["updated_at", "2022-10-29 17:36:00.665517"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.665892"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.665953"], ["updated_at", "2022-10-29 17:36:00.665953"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.666359"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.666413"], ["updated_at", "2022-10-29 17:36:00.666413"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.666768"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.666843"], ["updated_at", "2022-10-29 17:36:00.666843"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.667262"], ["sent_at", "2022-10-29 17:36:00.667273"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.667315"], ["updated_at", "2022-10-29 17:36:00.667315"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.667703"], ["sent_at", "2022-10-29 17:36:00.667713"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.667754"], ["updated_at", "2022-10-29 17:36:00.667754"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.668121"], ["sent_at", "2022-10-29 17:36:00.668131"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.668177"], ["updated_at", "2022-10-29 17:36:00.668177"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.668542"], ["skipped_at", "2022-10-29 17:36:00.668552"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.668591"], ["updated_at", "2022-10-29 17:36:00.668591"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.668952"], ["skipped_at", "2022-10-29 17:36:00.668962"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.668999"], ["updated_at", "2022-10-29 17:36:00.668999"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 230"], ["slug", "skipped_mailing"], ["created_at", "2022-10-29 17:36:00.669382"], ["updated_at", "2022-10-29 17:36:00.669382"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.669787"], ["updated_at", "2022-10-29 17:36:00.669787"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "89@example.com"], ["created_at", "2022-10-29 17:36:00.670144"], ["updated_at", "2022-10-29 17:36:00.670144"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "98503b1c-bfc9-4440-a99f-7aa5317e0c04"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "98503b1c-bfc9-4440-a99f-7aa5317e0c04"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 2], ["subscriber_type", "Company"], ["subscriber_id", 2], ["user_type", "User"], ["user_id", 2], ["token", "98503b1c-bfc9-4440-a99f-7aa5317e0c04"], ["created_at", "2022-10-29 17:36:00.670865"], ["updated_at", "2022-10-29 17:36:00.670865"]]
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 2], ["send_at", "2022-10-29 17:36:00.671137"], ["mailer_class", "SkippedMailingMailer"], ["mailer_action", "happy"], ["created_at", "2022-10-29 17:36:00.671188"], ["updated_at", "2022-10-29 17:36:00.671188"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 2]]
  [1m[36mCaffeinate::Mailing Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_mailings".* FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? ORDER BY "caffeinate_mailings"."id" ASC LIMIT ?[0m  [["caffeinate_campaign_subscription_id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaign_subscriptions".* FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "skipped_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["skipped_at", "2022-10-29 17:36:00.671974"], ["updated_at", "2022-10-29 17:36:00.672301"], ["id", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" INNER JOIN "caffeinate_campaign_subscriptions" ON "caffeinate_campaigns"."id" = "caffeinate_campaign_subscriptions"."caffeinate_campaign_id" WHERE "caffeinate_campaign_subscriptions"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCaffeinate::Campaign Load (0.0ms)[0m  [1m[34mSELECT "caffeinate_campaigns".* FROM "caffeinate_campaigns" WHERE "caffeinate_campaigns"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 1)
SkippedMailingMailer#happy: processed outbound mail in 0.6ms
Delivered mail 635d6480a49aa_ee14f64851f0@eds-MacBook-Pro.mail (0.5ms)
Date: Sat, 29 Oct 2022 12:36:00 -0500
From: hello@example.com
To: hello@example.com
Message-ID: <635d6480a49aa_ee14f64851f0@eds-MacBook-Pro.mail>
Subject: hello
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
List-Unsubscribe: <http://caffeinate.test/caffeinate/campaign_subscriptions/98503b1c-bfc9-4440-a99f-7aa5317e0c04/subscribe>

hi
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_mailings" SET "skipped_at" = ?, "sent_at" = ?, "updated_at" = ? WHERE "caffeinate_mailings"."id" = ?[0m  [["skipped_at", nil], ["sent_at", "2022-10-29 17:36:00.674600"], ["updated_at", "2022-10-29 17:36:00.674743"], ["id", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Update (0.0ms)[0m  [1m[33mUPDATE "caffeinate_campaign_subscriptions" SET "updated_at" = ? WHERE "caffeinate_campaign_subscriptions"."id" = ?[0m  [["updated_at", "2022-10-29 17:36:00.675184"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.3ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 231"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.676731"], ["updated_at", "2022-10-29 17:36:00.676731"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.1ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.677675"], ["updated_at", "2022-10-29 17:36:00.677675"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "90@example.com"], ["created_at", "2022-10-29 17:36:00.678175"], ["updated_at", "2022-10-29 17:36:00.678175"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "e8639de1-dc87-4b08-b8a0-bf406942b9e1"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "e8639de1-dc87-4b08-b8a0-bf406942b9e1"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "e8639de1-dc87-4b08-b8a0-bf406942b9e1"], ["created_at", "2022-10-29 17:36:00.679060"], ["updated_at", "2022-10-29 17:36:00.679060"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.679925"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.680008"], ["updated_at", "2022-10-29 17:36:00.680008"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.680438"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.680488"], ["updated_at", "2022-10-29 17:36:00.680488"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.680873"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.680920"], ["updated_at", "2022-10-29 17:36:00.680920"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.681271"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.681333"], ["updated_at", "2022-10-29 17:36:00.681333"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.681710"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.681758"], ["updated_at", "2022-10-29 17:36:00.681758"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.682118"], ["sent_at", "2022-10-29 17:36:00.682128"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.682169"], ["updated_at", "2022-10-29 17:36:00.682169"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.682541"], ["sent_at", "2022-10-29 17:36:00.682551"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.682599"], ["updated_at", "2022-10-29 17:36:00.682599"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.682996"], ["sent_at", "2022-10-29 17:36:00.683006"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.683048"], ["updated_at", "2022-10-29 17:36:00.683048"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.683421"], ["skipped_at", "2022-10-29 17:36:00.683431"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.683474"], ["updated_at", "2022-10-29 17:36:00.683474"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.683859"], ["skipped_at", "2022-10-29 17:36:00.683873"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.683913"], ["updated_at", "2022-10-29 17:36:00.683913"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 232"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.684981"], ["updated_at", "2022-10-29 17:36:00.684981"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.685580"], ["updated_at", "2022-10-29 17:36:00.685580"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "91@example.com"], ["created_at", "2022-10-29 17:36:00.685945"], ["updated_at", "2022-10-29 17:36:00.685945"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5711e1f2-cb99-4c7f-9b32-9e89a37bcded"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "5711e1f2-cb99-4c7f-9b32-9e89a37bcded"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "5711e1f2-cb99-4c7f-9b32-9e89a37bcded"], ["created_at", "2022-10-29 17:36:00.686655"], ["updated_at", "2022-10-29 17:36:00.686655"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.687472"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.687558"], ["updated_at", "2022-10-29 17:36:00.687558"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.688011"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.688066"], ["updated_at", "2022-10-29 17:36:00.688066"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.688443"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.688498"], ["updated_at", "2022-10-29 17:36:00.688498"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.688894"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.688943"], ["updated_at", "2022-10-29 17:36:00.688943"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.689344"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.689403"], ["updated_at", "2022-10-29 17:36:00.689403"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.689822"], ["sent_at", "2022-10-29 17:36:00.689833"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.689884"], ["updated_at", "2022-10-29 17:36:00.689884"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.690314"], ["sent_at", "2022-10-29 17:36:00.690324"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.690386"], ["updated_at", "2022-10-29 17:36:00.690386"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.690773"], ["sent_at", "2022-10-29 17:36:00.690783"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.690824"], ["updated_at", "2022-10-29 17:36:00.690824"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.691201"], ["skipped_at", "2022-10-29 17:36:00.691215"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.691253"], ["updated_at", "2022-10-29 17:36:00.691253"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.691628"], ["skipped_at", "2022-10-29 17:36:00.691639"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.691681"], ["updated_at", "2022-10-29 17:36:00.691681"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Campaign Create (0.2ms)[0m  [1m[32mINSERT INTO "caffeinate_campaigns" ("name", "slug", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Campaign 233"], ["slug", "caffeinate_active_record_extension"], ["created_at", "2022-10-29 17:36:00.692675"], ["updated_at", "2022-10-29 17:36:00.692675"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCompany Create (0.0ms)[0m  [1m[32mINSERT INTO "companies" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2022-10-29 17:36:00.693266"], ["updated_at", "2022-10-29 17:36:00.693266"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["email", "92@example.com"], ["created_at", "2022-10-29 17:36:00.693660"], ["updated_at", "2022-10-29 17:36:00.693660"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2caa3f08-9df8-4293-aa96-c3f43a3d569d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "caffeinate_campaign_subscriptions" WHERE "caffeinate_campaign_subscriptions"."token" = ? LIMIT ?[0m  [["token", "2caa3f08-9df8-4293-aa96-c3f43a3d569d"], ["LIMIT", 1]]
  [1m[36mCaffeinate::CampaignSubscription Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_campaign_subscriptions" ("caffeinate_campaign_id", "subscriber_type", "subscriber_id", "user_type", "user_id", "token", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_id", 1], ["subscriber_type", "Company"], ["subscriber_id", 1], ["user_type", "User"], ["user_id", 1], ["token", "2caa3f08-9df8-4293-aa96-c3f43a3d569d"], ["created_at", "2022-10-29 17:36:00.694394"], ["updated_at", "2022-10-29 17:36:00.694394"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "caffeinate_mailings" WHERE "caffeinate_mailings"."caffeinate_campaign_subscription_id" = ? AND "caffeinate_mailings"."skipped_at" IS NULL AND "caffeinate_mailings"."sent_at" IS NULL[0m  [["caffeinate_campaign_subscription_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.1ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.695177"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.695248"], ["updated_at", "2022-10-29 17:36:00.695248"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.695700"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.695762"], ["updated_at", "2022-10-29 17:36:00.695762"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.696177"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.696240"], ["updated_at", "2022-10-29 17:36:00.696240"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.697991"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.698062"], ["updated_at", "2022-10-29 17:36:00.698062"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.698455"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.698504"], ["updated_at", "2022-10-29 17:36:00.698504"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.698876"], ["sent_at", "2022-10-29 17:36:00.698886"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.698925"], ["updated_at", "2022-10-29 17:36:00.698925"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.699289"], ["sent_at", "2022-10-29 17:36:00.699299"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.699337"], ["updated_at", "2022-10-29 17:36:00.699337"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "sent_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.699725"], ["sent_at", "2022-10-29 17:36:00.699735"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.699773"], ["updated_at", "2022-10-29 17:36:00.699773"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.700143"], ["skipped_at", "2022-10-29 17:36:00.700164"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.700204"], ["updated_at", "2022-10-29 17:36:00.700204"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCaffeinate::Mailing Create (0.0ms)[0m  [1m[32mINSERT INTO "caffeinate_mailings" ("caffeinate_campaign_subscription_id", "send_at", "skipped_at", "mailer_class", "mailer_action", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["caffeinate_campaign_subscription_id", 1], ["send_at", "2022-10-29 17:35:00.700585"], ["skipped_at", "2022-10-29 17:36:00.700596"], ["mailer_class", "MailerDoesNotExist"], ["mailer_action", "action_does_not_exist"], ["created_at", "2022-10-29 17:36:00.700641"], ["updated_at", "2022-10-29 17:36:00.700641"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
